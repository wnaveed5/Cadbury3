{"ast":null,"code":"// AI provider hook - uses ChatGPT API directly\n// Set REACT_APP_OPENAI_API_KEY in your .env file to keep the key secure\n\nexport function useAIProvider() {\n  const apiKey = process.env.REACT_APP_OPENAI_API_KEY;\n  async function getFieldSuggestions(payload) {\n    if (!apiKey) {\n      throw new Error('OpenAI API key not configured. Set REACT_APP_OPENAI_API_KEY in your .env file');\n    }\n    try {\n      var _payload$companyField, _payload$purchaseOrde, _payload$vendorFields, _payload$shipToFields, _payload$companyField2, _payload$purchaseOrde2, _payload$vendorFields2, _payload$shipToFields2, _content;\n      // Build reusable messages for both chat and fallback calls\n      const messages = [{\n        role: 'system',\n        content: `Generate realistic purchase order data in JSON format. Use ONE $ for money amounts. Return ONLY valid JSON.`\n      }, {\n        role: 'user',\n        content: `Generate a complete purchase order for a medium enterprise in the general business industry. \n\nYou MUST include ALL of these fields in your JSON response. Use FLAT field IDs (no nested objects):\n\nCompany Fields: ${(_payload$companyField = payload.companyFields) === null || _payload$companyField === void 0 ? void 0 : _payload$companyField.map(f => f.id).join(', ')}\nPurchase Order Fields: ${(_payload$purchaseOrde = payload.purchaseOrderFields) === null || _payload$purchaseOrde === void 0 ? void 0 : _payload$purchaseOrde.map(f => f.id).join(', ')}\nVendor Fields: ${(_payload$vendorFields = payload.vendorFields) === null || _payload$vendorFields === void 0 ? void 0 : _payload$vendorFields.map(f => f.id).join(', ')}\nShip To Fields: ${(_payload$shipToFields = payload.shipToFields) === null || _payload$shipToFields === void 0 ? void 0 : _payload$shipToFields.map(f => f.id).join(', ')}\n\nShipping Details (REQUIRED):\n- requisitioner\n- shipVia  \n- fob\n- shippingTerms\n\nLine Items (REQUIRED - generate 3 items):\n- itemNumber1, itemNumber2, itemNumber3\n- description1, description2, description3\n- qty1, qty2, qty3\n- rate1, rate2, rate3\n- amount1, amount2, amount3\n\nFinancial Totals (REQUIRED):\n- subtotal\n- tax\n- shipping\n- other\n- total\n\nAdditional Fields (REQUIRED):\n- comments\n- contactInfo\n\nCRITICAL: Return a FLAT JSON object with these EXACT field IDs:\n\n{\n  // Company Fields\n  ${(_payload$companyField2 = payload.companyFields) === null || _payload$companyField2 === void 0 ? void 0 : _payload$companyField2.map(f => `  \"${f.id}\": \"value\"`).join(',\\n  ')},\n  \n  // Purchase Order Fields  \n  ${(_payload$purchaseOrde2 = payload.purchaseOrderFields) === null || _payload$purchaseOrde2 === void 0 ? void 0 : _payload$purchaseOrde2.map(f => `  \"${f.id}\": \"value\"`).join(',\\n  ')},\n  \n  // Vendor Fields\n  ${(_payload$vendorFields2 = payload.vendorFields) === null || _payload$vendorFields2 === void 0 ? void 0 : _payload$vendorFields2.map(f => `  \"${f.id}\": \"value\"`).join(',\\n  ')},\n  \n  // Ship To Fields\n  ${(_payload$shipToFields2 = payload.shipToFields) === null || _payload$shipToFields2 === void 0 ? void 0 : _payload$shipToFields2.map(f => `  \"${f.id}\": \"value\"`).join(',\\n  ')},\n  \n  // Shipping Details\n  \"requisitioner\": \"value\",\n  \"shipVia\": \"value\", \n  \"fob\": \"value\",\n  \"shippingTerms\": \"value\",\n  \n  // Line Items (3 items)\n  \"itemNumber1\": \"1\",\n  \"description1\": \"value\",\n  \"qty1\": \"value\",\n  \"rate1\": \"$value\",\n  \"amount1\": \"$value\",\n  \"itemNumber2\": \"2\", \n  \"description2\": \"value\",\n  \"qty2\": \"value\",\n  \"rate2\": \"$value\",\n  \"amount2\": \"$value\",\n  \"itemNumber3\": \"3\",\n  \"description3\": \"value\", \n  \"qty3\": \"value\",\n  \"rate3\": \"$value\",\n  \"amount3\": \"$value\",\n  \n  // Financial Totals\n  \"subtotal\": \"$value\",\n  \"tax\": \"$value\",\n  \"shipping\": \"$value\",\n  \"other\": \"$value\",\n  \"total\": \"$value\",\n  \n  // Additional Fields\n  \"comments\": \"value\",\n  \"contactInfo\": \"value\"\n}\n\nRequirements:\n- Use realistic business names and addresses\n- Use current date for PO date\n- Calculate line item amounts (qty Ã— rate = amount)\n- Calculate subtotal from line items\n- Apply 8.5% tax to subtotal\n- Set shipping between $25-75\n- Calculate total (subtotal + tax + shipping + other)\n- Format ALL monetary values with ONE dollar sign: \"$123.45\"\n- Return ONLY valid JSON with these exact field IDs as keys`\n      }];\n      const response = await fetch('https://api.openai.com/v1/chat/completions', {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${apiKey}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          model: 'gpt-3.5-turbo',\n          messages,\n          max_tokens: 2000,\n          temperature: 0.7\n        })\n      });\n      if (!response.ok) {\n        var _errorData$error;\n        const errorData = await response.json();\n        throw new Error(`OpenAI API error: ${((_errorData$error = errorData.error) === null || _errorData$error === void 0 ? void 0 : _errorData$error.message) || response.statusText}`);\n      }\n      const data = await response.json();\n      console.debug('ðŸ§ª OpenAI chat data:', data);\n\n      // Extract content across possible API response shapes\n      const extractContent = payload => {\n        var _payload$choices, _payload$choices$, _payload$choices$$mes, _payload$choices2, _payload$choices2$, _payload$choices2$$me;\n        const cc = payload === null || payload === void 0 ? void 0 : (_payload$choices = payload.choices) === null || _payload$choices === void 0 ? void 0 : (_payload$choices$ = _payload$choices[0]) === null || _payload$choices$ === void 0 ? void 0 : (_payload$choices$$mes = _payload$choices$.message) === null || _payload$choices$$mes === void 0 ? void 0 : _payload$choices$$mes.content;\n        if (typeof cc === 'string' && cc.trim()) return cc;\n        // Some models may return parsed JSON when response_format is json_object\n        const parsedField = payload === null || payload === void 0 ? void 0 : (_payload$choices2 = payload.choices) === null || _payload$choices2 === void 0 ? void 0 : (_payload$choices2$ = _payload$choices2[0]) === null || _payload$choices2$ === void 0 ? void 0 : (_payload$choices2$$me = _payload$choices2$.message) === null || _payload$choices2$$me === void 0 ? void 0 : _payload$choices2$$me.parsed;\n        if (parsedField && typeof parsedField === 'object') return JSON.stringify(parsedField);\n        if (typeof (payload === null || payload === void 0 ? void 0 : payload.output_text) === 'string' && payload.output_text.trim()) {\n          return payload.output_text;\n        }\n        const outputArray = payload === null || payload === void 0 ? void 0 : payload.output;\n        if (Array.isArray(outputArray) && outputArray.length > 0) {\n          // Search all items and parts for any text\n          for (const item of outputArray) {\n            const parts = item === null || item === void 0 ? void 0 : item.content;\n            if (Array.isArray(parts)) {\n              for (const p of parts) {\n                if (typeof (p === null || p === void 0 ? void 0 : p.text) === 'string' && p.text.trim()) return p.text;\n              }\n            }\n          }\n        }\n        const topContent = payload === null || payload === void 0 ? void 0 : payload.content;\n        if (Array.isArray(topContent)) {\n          const textPart = topContent.find(p => typeof (p === null || p === void 0 ? void 0 : p.text) === 'string' && p.text.trim());\n          if (textPart !== null && textPart !== void 0 && textPart.text) return textPart.text;\n        }\n        return undefined;\n      };\n      let content = extractContent(data);\n      console.debug('ðŸ§ª Extracted content after chat:', typeof content, (_content = content) !== null && _content !== void 0 && _content.slice ? content.slice(0, 200) : content);\n      if (!content) {\n        var _content2;\n        // Fallback to Responses API once\n        const respFallback = await fetch('https://api.openai.com/v1/responses', {\n          method: 'POST',\n          headers: {\n            'Authorization': `Bearer ${apiKey}`,\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            model: 'gpt-3.5-turbo',\n            // Send structured messages for better adherence\n            input: [{\n              role: 'system',\n              content: messages[0].content\n            }, {\n              role: 'user',\n              content: messages[1].content\n            }],\n            // Force JSON-only output\n            response_format: {\n              type: 'json_object'\n            },\n            max_output_tokens: 1500\n          })\n        });\n        if (!respFallback.ok) {\n          var _errorData$error2;\n          const errorData = await respFallback.json();\n          throw new Error(`OpenAI API error: ${((_errorData$error2 = errorData.error) === null || _errorData$error2 === void 0 ? void 0 : _errorData$error2.message) || respFallback.statusText}`);\n        }\n        const dataFallback = await respFallback.json();\n        console.debug('ðŸ§ª OpenAI responses data (fallback):', dataFallback);\n        content = extractContent(dataFallback);\n        console.debug('ðŸ§ª Extracted content after fallback:', typeof content, (_content2 = content) !== null && _content2 !== void 0 && _content2.slice ? content.slice(0, 200) : content);\n      }\n      if (!content) {\n        throw new Error('No response content from OpenAI');\n      }\n\n      // Parse the JSON response, tolerate code fences or extra text, and filter to known field IDs\n      try {\n        // Remove possible Markdown code fences\n        let cleaned = content.trim();\n        if (cleaned.startsWith('```')) {\n          cleaned = cleaned.replace(/^```(?:json)?\\s*/i, '').replace(/```$/i, '').trim();\n        }\n        let parsed;\n        try {\n          parsed = JSON.parse(cleaned);\n        } catch (innerErr) {\n          // Try extracting the first JSON object if extra prose is present\n          const firstBrace = cleaned.indexOf('{');\n          const lastBrace = cleaned.lastIndexOf('}');\n          if (firstBrace !== -1 && lastBrace !== -1 && lastBrace > firstBrace) {\n            const maybeJson = cleaned.slice(firstBrace, lastBrace + 1);\n            parsed = JSON.parse(maybeJson);\n          } else {\n            throw innerErr;\n          }\n        }\n\n        // Build allowlist of known field IDs and a lookup by normalized label\n        const allFields = [...(payload.companyFields || []), ...(payload.purchaseOrderFields || []), ...(payload.vendorFields || []), ...(payload.shipToFields || []), ...(payload.shippingFields || [])];\n        const allowedIds = allFields.map(f => f.id);\n        const normalize = s => String(s || '').toLowerCase().replace(/[`\"'â€™]/g, '').replace(/\\s+/g, ' ').trim().replace(/[^a-z0-9]+/g, '');\n        const labelToId = Object.fromEntries(allFields.map(f => [normalize(f.label || f.id), f.id]));\n        const coerceToString = v => {\n          if (typeof v === 'string') return v;\n          if (typeof v === 'number' || typeof v === 'boolean') return String(v);\n          if (v && typeof v === 'object') {\n            if (typeof v.value === 'string') return v.value;\n            if (typeof v.text === 'string') return v.text;\n          }\n          return undefined;\n        };\n        const suggestions = {};\n        for (const [rawKey, rawVal] of Object.entries(parsed || {})) {\n          const value = coerceToString(rawVal);\n          if (value === undefined) continue;\n\n          // direct id match\n          if (allowedIds.includes(rawKey)) {\n            suggestions[rawKey] = value;\n            continue;\n          }\n\n          // label-based or fuzzy match\n          const normalizedKey = normalize(rawKey);\n          const maybeId = labelToId[normalizedKey];\n          if (maybeId && allowedIds.includes(maybeId)) {\n            suggestions[maybeId] = value;\n          }\n        }\n        return {\n          suggestions\n        };\n      } catch (parseError) {\n        console.error('Failed to parse OpenAI response:', content);\n        throw new Error('Invalid JSON response from AI - please try again');\n      }\n    } catch (error) {\n      console.error('OpenAI API call failed:', error);\n      throw error;\n    }\n  }\n  return {\n    getFieldSuggestions\n  };\n}","map":{"version":3,"names":["useAIProvider","apiKey","process","env","REACT_APP_OPENAI_API_KEY","getFieldSuggestions","payload","Error","_payload$companyField","_payload$purchaseOrde","_payload$vendorFields","_payload$shipToFields","_payload$companyField2","_payload$purchaseOrde2","_payload$vendorFields2","_payload$shipToFields2","_content","messages","role","content","companyFields","map","f","id","join","purchaseOrderFields","vendorFields","shipToFields","response","fetch","method","headers","body","JSON","stringify","model","max_tokens","temperature","ok","_errorData$error","errorData","json","error","message","statusText","data","console","debug","extractContent","_payload$choices","_payload$choices$","_payload$choices$$mes","_payload$choices2","_payload$choices2$","_payload$choices2$$me","cc","choices","trim","parsedField","parsed","output_text","outputArray","output","Array","isArray","length","item","parts","p","text","topContent","textPart","find","undefined","slice","_content2","respFallback","input","response_format","type","max_output_tokens","_errorData$error2","dataFallback","cleaned","startsWith","replace","parse","innerErr","firstBrace","indexOf","lastBrace","lastIndexOf","maybeJson","allFields","shippingFields","allowedIds","normalize","s","String","toLowerCase","labelToId","Object","fromEntries","label","coerceToString","v","value","suggestions","rawKey","rawVal","entries","includes","normalizedKey","maybeId","parseError"],"sources":["/Users/waleed/Documents/GitHub/Cadbury3/src/hooks/useAIProvider.js"],"sourcesContent":["// AI provider hook - uses ChatGPT API directly\n// Set REACT_APP_OPENAI_API_KEY in your .env file to keep the key secure\n\nexport function useAIProvider() {\n  const apiKey = process.env.REACT_APP_OPENAI_API_KEY;\n\n  async function getFieldSuggestions(payload) {\n    if (!apiKey) {\n      throw new Error('OpenAI API key not configured. Set REACT_APP_OPENAI_API_KEY in your .env file');\n    }\n\n    try {\n      // Build reusable messages for both chat and fallback calls\n      const messages = [\n        {\n          role: 'system',\n          content: `Generate realistic purchase order data in JSON format. Use ONE $ for money amounts. Return ONLY valid JSON.`\n        },\n        {\n          role: 'user',\n          content: `Generate a complete purchase order for a medium enterprise in the general business industry. \n\nYou MUST include ALL of these fields in your JSON response. Use FLAT field IDs (no nested objects):\n\nCompany Fields: ${payload.companyFields?.map(f => f.id).join(', ')}\nPurchase Order Fields: ${payload.purchaseOrderFields?.map(f => f.id).join(', ')}\nVendor Fields: ${payload.vendorFields?.map(f => f.id).join(', ')}\nShip To Fields: ${payload.shipToFields?.map(f => f.id).join(', ')}\n\nShipping Details (REQUIRED):\n- requisitioner\n- shipVia  \n- fob\n- shippingTerms\n\nLine Items (REQUIRED - generate 3 items):\n- itemNumber1, itemNumber2, itemNumber3\n- description1, description2, description3\n- qty1, qty2, qty3\n- rate1, rate2, rate3\n- amount1, amount2, amount3\n\nFinancial Totals (REQUIRED):\n- subtotal\n- tax\n- shipping\n- other\n- total\n\nAdditional Fields (REQUIRED):\n- comments\n- contactInfo\n\nCRITICAL: Return a FLAT JSON object with these EXACT field IDs:\n\n{\n  // Company Fields\n  ${payload.companyFields?.map(f => `  \"${f.id}\": \"value\"`).join(',\\n  ')},\n  \n  // Purchase Order Fields  \n  ${payload.purchaseOrderFields?.map(f => `  \"${f.id}\": \"value\"`).join(',\\n  ')},\n  \n  // Vendor Fields\n  ${payload.vendorFields?.map(f => `  \"${f.id}\": \"value\"`).join(',\\n  ')},\n  \n  // Ship To Fields\n  ${payload.shipToFields?.map(f => `  \"${f.id}\": \"value\"`).join(',\\n  ')},\n  \n  // Shipping Details\n  \"requisitioner\": \"value\",\n  \"shipVia\": \"value\", \n  \"fob\": \"value\",\n  \"shippingTerms\": \"value\",\n  \n  // Line Items (3 items)\n  \"itemNumber1\": \"1\",\n  \"description1\": \"value\",\n  \"qty1\": \"value\",\n  \"rate1\": \"$value\",\n  \"amount1\": \"$value\",\n  \"itemNumber2\": \"2\", \n  \"description2\": \"value\",\n  \"qty2\": \"value\",\n  \"rate2\": \"$value\",\n  \"amount2\": \"$value\",\n  \"itemNumber3\": \"3\",\n  \"description3\": \"value\", \n  \"qty3\": \"value\",\n  \"rate3\": \"$value\",\n  \"amount3\": \"$value\",\n  \n  // Financial Totals\n  \"subtotal\": \"$value\",\n  \"tax\": \"$value\",\n  \"shipping\": \"$value\",\n  \"other\": \"$value\",\n  \"total\": \"$value\",\n  \n  // Additional Fields\n  \"comments\": \"value\",\n  \"contactInfo\": \"value\"\n}\n\nRequirements:\n- Use realistic business names and addresses\n- Use current date for PO date\n- Calculate line item amounts (qty Ã— rate = amount)\n- Calculate subtotal from line items\n- Apply 8.5% tax to subtotal\n- Set shipping between $25-75\n- Calculate total (subtotal + tax + shipping + other)\n- Format ALL monetary values with ONE dollar sign: \"$123.45\"\n- Return ONLY valid JSON with these exact field IDs as keys`\n        }\n      ];\n\n      const response = await fetch('https://api.openai.com/v1/chat/completions', {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${apiKey}`,\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          model: 'gpt-3.5-turbo',\n          messages,\n          max_tokens: 2000,\n          temperature: 0.7\n        })\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(`OpenAI API error: ${errorData.error?.message || response.statusText}`);\n      }\n\n      const data = await response.json();\n      console.debug('ðŸ§ª OpenAI chat data:', data);\n\n      // Extract content across possible API response shapes\n      const extractContent = (payload) => {\n        const cc = payload?.choices?.[0]?.message?.content;\n        if (typeof cc === 'string' && cc.trim()) return cc;\n        // Some models may return parsed JSON when response_format is json_object\n        const parsedField = payload?.choices?.[0]?.message?.parsed;\n        if (parsedField && typeof parsedField === 'object') return JSON.stringify(parsedField);\n        if (typeof payload?.output_text === 'string' && payload.output_text.trim()) {\n          return payload.output_text;\n        }\n        const outputArray = payload?.output;\n        if (Array.isArray(outputArray) && outputArray.length > 0) {\n          // Search all items and parts for any text\n          for (const item of outputArray) {\n            const parts = item?.content;\n            if (Array.isArray(parts)) {\n              for (const p of parts) {\n                if (typeof p?.text === 'string' && p.text.trim()) return p.text;\n              }\n            }\n          }\n        }\n        const topContent = payload?.content;\n        if (Array.isArray(topContent)) {\n          const textPart = topContent.find(p => typeof p?.text === 'string' && p.text.trim());\n          if (textPart?.text) return textPart.text;\n        }\n        return undefined;\n      };\n\n      let content = extractContent(data);\n      console.debug('ðŸ§ª Extracted content after chat:', typeof content, content?.slice ? content.slice(0, 200) : content);\n      \n      if (!content) {\n        // Fallback to Responses API once\n        const respFallback = await fetch('https://api.openai.com/v1/responses', {\n          method: 'POST',\n          headers: {\n            'Authorization': `Bearer ${apiKey}`,\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({\n            model: 'gpt-3.5-turbo',\n            // Send structured messages for better adherence\n            input: [\n              { role: 'system', content: messages[0].content },\n              { role: 'user', content: messages[1].content }\n            ],\n            // Force JSON-only output\n            response_format: { type: 'json_object' },\n            max_output_tokens: 1500\n          })\n        });\n\n        if (!respFallback.ok) {\n          const errorData = await respFallback.json();\n          throw new Error(`OpenAI API error: ${errorData.error?.message || respFallback.statusText}`);\n        }\n\n        const dataFallback = await respFallback.json();\n        console.debug('ðŸ§ª OpenAI responses data (fallback):', dataFallback);\n        content = extractContent(dataFallback);\n        console.debug('ðŸ§ª Extracted content after fallback:', typeof content, content?.slice ? content.slice(0, 200) : content);\n      }\n\n      if (!content) {\n        throw new Error('No response content from OpenAI');\n      }\n\n      // Parse the JSON response, tolerate code fences or extra text, and filter to known field IDs\n      try {\n        // Remove possible Markdown code fences\n        let cleaned = content.trim();\n        if (cleaned.startsWith('```')) {\n          cleaned = cleaned.replace(/^```(?:json)?\\s*/i, '').replace(/```$/i, '').trim();\n        }\n\n        let parsed;\n        try {\n          parsed = JSON.parse(cleaned);\n        } catch (innerErr) {\n          // Try extracting the first JSON object if extra prose is present\n          const firstBrace = cleaned.indexOf('{');\n          const lastBrace = cleaned.lastIndexOf('}');\n          if (firstBrace !== -1 && lastBrace !== -1 && lastBrace > firstBrace) {\n            const maybeJson = cleaned.slice(firstBrace, lastBrace + 1);\n            parsed = JSON.parse(maybeJson);\n          } else {\n            throw innerErr;\n          }\n        }\n\n        // Build allowlist of known field IDs and a lookup by normalized label\n        const allFields = [\n          ...(payload.companyFields || []),\n          ...(payload.purchaseOrderFields || []),\n          ...(payload.vendorFields || []),\n          ...(payload.shipToFields || []),\n          ...(payload.shippingFields || [])\n        ];\n        const allowedIds = allFields.map(f => f.id);\n        const normalize = (s) => String(s || '')\n          .toLowerCase()\n          .replace(/[`\"'â€™]/g, '')\n          .replace(/\\s+/g, ' ')\n          .trim()\n          .replace(/[^a-z0-9]+/g, '');\n        const labelToId = Object.fromEntries(\n          allFields.map(f => [normalize(f.label || f.id), f.id])\n        );\n\n        const coerceToString = (v) => {\n          if (typeof v === 'string') return v;\n          if (typeof v === 'number' || typeof v === 'boolean') return String(v);\n          if (v && typeof v === 'object') {\n            if (typeof v.value === 'string') return v.value;\n            if (typeof v.text === 'string') return v.text;\n          }\n          return undefined;\n        };\n\n        const suggestions = {};\n        for (const [rawKey, rawVal] of Object.entries(parsed || {})) {\n          const value = coerceToString(rawVal);\n          if (value === undefined) continue;\n\n          // direct id match\n          if (allowedIds.includes(rawKey)) {\n            suggestions[rawKey] = value;\n            continue;\n          }\n\n          // label-based or fuzzy match\n          const normalizedKey = normalize(rawKey);\n          const maybeId = labelToId[normalizedKey];\n          if (maybeId && allowedIds.includes(maybeId)) {\n            suggestions[maybeId] = value;\n          }\n        }\n\n        return { suggestions };\n      } catch (parseError) {\n        console.error('Failed to parse OpenAI response:', content);\n        throw new Error('Invalid JSON response from AI - please try again');\n      }\n    } catch (error) {\n      console.error('OpenAI API call failed:', error);\n      throw error;\n    }\n  }\n\n  return { getFieldSuggestions };\n}\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}