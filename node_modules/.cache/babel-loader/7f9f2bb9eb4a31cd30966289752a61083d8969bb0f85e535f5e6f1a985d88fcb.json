{"ast":null,"code":"import _objectSpread from\"/Users/waleed/Documents/GitHub/Cadbury3/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// Purchase Order XML Template for NetSuite Integration\n// This template generates XML compatible with Big Faceless Report Generator (BFR)\nimport{processFormData}from'./FormDataMapper';// Function to generate XML from React form data\nexport function generatePurchaseOrderXML(formData){var _fieldOrderData$compa,_fieldOrderData$purch,_formData$companyFiel,_data$companyFields,_fieldOrderData$compa2,_fieldOrderData$compa3;let options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};// DEBUG: Log that we're using the DYNAMIC ID template\nconsole.log('🚀 DYNAMIC ID TEMPLATE VERSION LOADED - generatePurchaseOrderXML called');console.log('📅 Template updated at:',new Date().toISOString());console.log('📊 Raw form data received:',formData);// Process and validate form data using the FormDataMapper\nlet processedData;try{processedData=processFormData(formData,{calculateTotals:options.calculateTotals!==false,validate:options.validate!==false,formatForXML:true,throwOnValidationError:options.throwOnValidationError||false});console.log('📊 Processed form data:',processedData);}catch(error){console.error('❌ Form data processing failed:',error);if(options.throwOnValidationError){throw error;}// Fallback to using raw data\nprocessedData=formData||{};}// Use processed data for XML generation, fallback to original data\n// BUT preserve the original field order from formData for dynamic ordering\nconst data=processedData||formData||{};// IMPORTANT: For field ordering, use the original formData to preserve drag-and-drop order\nconst fieldOrderData=_objectSpread(_objectSpread({},data),{},{companyFields:formData.companyFields||data.companyFields||[],purchaseOrderFields:formData.purchaseOrderFields||data.purchaseOrderFields||[],vendorFields:formData.vendorFields||data.vendorFields||[],shipToFields:formData.shipToFields||data.shipToFields||[]});// DEBUG: Log field order data creation\nconsole.log('🔍 DEBUG: fieldOrderData created with:');console.log('🔍 DEBUG: - companyFields:',(_fieldOrderData$compa=fieldOrderData.companyFields)===null||_fieldOrderData$compa===void 0?void 0:_fieldOrderData$compa.map(f=>({id:f.id,label:f.label})));console.log('🔍 DEBUG: - purchaseOrderFields:',(_fieldOrderData$purch=fieldOrderData.purchaseOrderFields)===null||_fieldOrderData$purch===void 0?void 0:_fieldOrderData$purch.map(f=>({id:f.id,label:f.label})));console.log('🔍 DEBUG: - formData.companyFields:',(_formData$companyFiel=formData.companyFields)===null||_formData$companyFiel===void 0?void 0:_formData$companyFiel.map(f=>({id:f.id,label:f.label})));console.log('🔍 DEBUG: - data.companyFields:',(_data$companyFields=data.companyFields)===null||_data$companyFields===void 0?void 0:_data$companyFields.map(f=>({id:f.id,label:f.label})));// VALIDATION: Ensure field order data is robust and independent of section order\nconsole.log('🔍 DEBUG: Field order data validation:');console.log('🔍 DEBUG: - fieldOrderData.companyFields length:',(_fieldOrderData$compa2=fieldOrderData.companyFields)===null||_fieldOrderData$compa2===void 0?void 0:_fieldOrderData$compa2.length);console.log('🔍 DEBUG: - fieldOrderData.companyFields is array:',Array.isArray(fieldOrderData.companyFields));console.log('🔍 DEBUG: - fieldOrderData.companyFields IDs:',(_fieldOrderData$compa3=fieldOrderData.companyFields)===null||_fieldOrderData$compa3===void 0?void 0:_fieldOrderData$compa3.map(f=>f.id));// Ensure field order data is always available and valid\nif(!Array.isArray(fieldOrderData.companyFields)||fieldOrderData.companyFields.length===0){console.warn('⚠️ WARNING: companyFields is not available or empty, this may cause field order issues');}// Helper function to safely get field values with fallbacks (for simple fields)\nconst getFieldValue=function(fieldName){let defaultValue=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';return data[fieldName]||defaultValue;};// Enhanced helper function to get field values by dynamic ID or static fallback\nconst getDynamicFieldValue=function(fieldArray,possibleIds){let defaultValue=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'';if(!fieldArray||!Array.isArray(fieldArray)){return defaultValue;}// Try each possible ID in order of preference\nfor(const fieldId of possibleIds){const field=fieldArray.find(f=>f.id===fieldId);if(field&&field.value){return field.value;}}return defaultValue;};// Helper function to get company field values with dynamic ID support\nconst getCompanyFieldValue=function(staticId){let defaultValue=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';if(data.companyFields&&Array.isArray(data.companyFields)){// First try the static ID, then try dynamic IDs that might have been generated\nconst possibleIds=[staticId,\"company-field-\".concat(staticId),\"\".concat(staticId,\"-\").concat(Date.now()),...data.companyFields.filter(f=>f.id.includes(staticId.replace('company-',''))).map(f=>f.id)];return getDynamicFieldValue(data.companyFields,possibleIds,defaultValue);}return defaultValue;};// Helper function to get purchase order field values with dynamic ID support\nconst getPOFieldValue=function(staticId){let defaultValue=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';if(data.purchaseOrderFields&&Array.isArray(data.purchaseOrderFields)){const possibleIds=[staticId,\"po-field-\".concat(staticId),\"\".concat(staticId,\"-\").concat(Date.now()),...data.purchaseOrderFields.filter(f=>f.id.includes(staticId.replace('po-',''))).map(f=>f.id)];return getDynamicFieldValue(data.purchaseOrderFields,possibleIds,defaultValue);}return defaultValue;};// Helper function to get vendor field values with dynamic ID support\nconst getVendorFieldValue=function(staticId){let defaultValue=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';if(data.vendorFields&&Array.isArray(data.vendorFields)){const possibleIds=[staticId,\"vendor-field-\".concat(staticId),\"\".concat(staticId,\"-\").concat(Date.now()),...data.vendorFields.filter(f=>f.id.includes(staticId.replace('vendor-',''))).map(f=>f.id)];return getDynamicFieldValue(data.vendorFields,possibleIds,defaultValue);}return defaultValue;};// Helper function to get ship-to field values with dynamic ID support\nconst getShipToFieldValue=function(staticId){let defaultValue=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';if(data.shipToFields&&Array.isArray(data.shipToFields)){const possibleIds=[staticId,\"ship-to-field-\".concat(staticId),\"\".concat(staticId,\"-\").concat(Date.now()),...data.shipToFields.filter(f=>f.id.includes(staticId.replace('ship-to-',''))).map(f=>f.id)];return getDynamicFieldValue(data.shipToFields,possibleIds,defaultValue);}return defaultValue;};// Helper function to get totals field values with dynamic ID support\nconst getTotalsFieldValue=function(staticId){let defaultValue=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';if(data.totalsFields&&Array.isArray(data.totalsFields)){const possibleIds=[staticId,\"totals-field-\".concat(staticId),\"\".concat(staticId,\"-\").concat(Date.now()),...data.totalsFields.filter(f=>f.id.includes(staticId)).map(f=>f.id)];return getDynamicFieldValue(data.totalsFields,possibleIds,defaultValue);}return defaultValue;};// ============================================================================\n// MODULAR XML BUILDER FUNCTIONS\n// ============================================================================\n// Build Company Information XML with dynamic field ordering (same pattern as section swapping)y\nconst buildCompanyXML=function(){var _data$fieldOrder,_data$sectionOrder;let position=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'left';// Get company fields from fieldOrderData to preserve drag-and-drop order\nconst companyFields=fieldOrderData.companyFields||[];// CRITICAL: Get field order from data (same pattern as section order)\nconst fieldOrder=((_data$fieldOrder=data.fieldOrder)===null||_data$fieldOrder===void 0?void 0:_data$fieldOrder.company)||companyFields.map(f=>f.id);console.log('🔀 Building company XML with dynamic field ordering');console.log('🔀 Company fields received from data:',companyFields.length);console.log('🔀 Company fields IDs in current order:',companyFields.map(f=>f.id));console.log('🔀 Company fields labels in current order:',companyFields.map(f=>f.label));console.log('🔀 Company fields values in current order:',companyFields.map(f=>f.value));console.log('🔀 Field order from data:',fieldOrder);// CRITICAL: Ensure field order is completely independent of section order\n// The field order should be preserved exactly as it appears in fieldOrderData.companyFields\n// regardless of whether this section is on the left or right\nconsole.log('🔍 DEBUG: Field order independence verification:');console.log('🔍 DEBUG: - Current section order:',(_data$sectionOrder=data.sectionOrder)===null||_data$sectionOrder===void 0?void 0:_data$sectionOrder.sections1And2);console.log('🔍 DEBUG: - Company fields order (should be independent):',companyFields.map(f=>({id:f.id,label:f.label,position:companyFields.indexOf(f)})));// CRITICAL: Reorder fields based on fieldOrder (same pattern as section swapping)\nconst orderedCompanyFields=fieldOrder.map(fieldId=>{const field=companyFields.find(f=>f.id===fieldId);if(!field){console.warn(\"\\u26A0\\uFE0F WARNING: Field with ID \".concat(fieldId,\" not found in companyFields\"));return null;}return field;}).filter(Boolean);// Remove any null fields\nconsole.log('🔀 Ordered company fields for XML generation:',orderedCompanyFields.map(f=>({id:f.id,label:f.label,position:orderedCompanyFields.indexOf(f)})));// Build rows dynamically based on ordered field order (same as section swapping)\nconst fieldRows=orderedCompanyFields.map((field,index)=>{const fieldValue=field.value||field.placeholder||'';const isHeader=field.id==='company-name';console.log(\"\\uD83D\\uDD00 Processing field \".concat(index,\":\"),{id:field.id,label:field.label,value:fieldValue,isHeader,position:index});if(isHeader){const row=\"<tr><td class=\\\"header-company\\\" style=\\\"text-align: left;\\\" data-field=\\\"\".concat(field.id,\"\\\">\").concat(fieldValue,\"</td></tr>\");console.log(\"\\uD83D\\uDD00 Generated header row for \".concat(field.id,\":\"),row);return row;}else{// Handle special formatting for phone, fax, website\nlet displayText=fieldValue;if(field.id==='company-phone')displayText=\"Phone: \".concat(fieldValue);if(field.id==='company-fax')displayText=\"Fax: \".concat(fieldValue);if(field.id==='company-website')displayText=\"Website: \".concat(fieldValue);const row=\"<tr><td style=\\\"text-align: left;\\\" data-field=\\\"\".concat(field.id,\"\\\">\").concat(displayText,\"</td></tr>\");console.log(\"\\uD83D\\uDD00 Generated regular row for \".concat(field.id,\":\"),row);return row;}}).join('');console.log('🔀 Final generated fieldRows:',fieldRows);// Side-aware padding to keep spacing consistent when swapped\nconst companyTdPadding=position==='left'?'padding-right: 24px;':'padding-left: 36px;';const result=\"\\n      <td style=\\\"width: 65%; \".concat(companyTdPadding,\"\\\" data-section=\\\"company-info\\\">\\n        <table>\\n          \").concat(fieldRows,\"\\n        </table>\\n      </td>\\n    \");console.log('🔀 Final company XML result:',result);return result;};// Build Purchase Order Information XML\nconst buildPurchaseOrderXML=function(){var _data$fieldOrder2;let position=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'right';// Get purchase order fields from fieldOrderData to preserve drag-and-drop order\nconst purchaseOrderFields=fieldOrderData.purchaseOrderFields||[];// CRITICAL: Get field order from data (same pattern as section order)\nconst fieldOrder=((_data$fieldOrder2=data.fieldOrder)===null||_data$fieldOrder2===void 0?void 0:_data$fieldOrder2.purchaseOrder)||purchaseOrderFields.map(f=>f.id);console.log('🔀 Building purchase order XML with dynamic field ordering');console.log('🔀 Purchase order fields received from data:',purchaseOrderFields.length);console.log('🔀 Purchase order fields IDs in current order:',purchaseOrderFields.map(f=>f.id));console.log('🔀 Field order from data:',fieldOrder);// CRITICAL: Reorder fields based on fieldOrder (same pattern as section swapping)\nconst orderedPOFields=fieldOrder.map(fieldId=>{const field=purchaseOrderFields.find(f=>f.id===fieldId);if(!field){console.warn(\"\\u26A0\\uFE0F WARNING: Field with ID \".concat(fieldId,\" not found in purchaseOrderFields\"));return null;}return field;}).filter(Boolean);// Remove any null fields\nconsole.log('🔀 Ordered purchase order fields for XML generation:',orderedPOFields.map(f=>({id:f.id,label:f.label,position:orderedPOFields.indexOf(f)})));// Build XML based on ordered fields\nconst fieldRows=orderedPOFields.map((field,index)=>{// Prefer captured value; fallback to template getters to ensure content always present\nconst isTitle=field.id==='po-title';if(isTitle){const value=field.value||getPOFieldValue('po-title','PURCHASE ORDER');return\"<tr><td class=\\\"header-title\\\" style=\\\"text-align: right;\\\" data-field=\\\"\".concat(field.id,\"\\\">\").concat(value,\"</td></tr>\");}if(field.id==='po-date'){const value=field.value||getPOFieldValue('po-date','MM/DD/YYYY');return\"<tr><td style=\\\"text-align: right;\\\"><table style=\\\"width: 100%;\\\"><tr><td class=\\\"header-info\\\" style=\\\"width: 30%; text-align: left;\\\"><b>DATE</b></td><td class=\\\"header-info\\\" style=\\\"width: 70%; text-align: left;\\\" data-field=\\\"po-date\\\">\".concat(value,\"</td></tr></table></td></tr>\");}if(field.id==='po-number'){const value=field.value||getPOFieldValue('po-number','[PO Number]');return\"<tr><td style=\\\"text-align: right;\\\"><table style=\\\"width: 100%;\\\"><tr><td class=\\\"header-info\\\" style=\\\"width: 30%; text-align: left;\\\"><b>PO #</b></td><td class=\\\"header-info\\\" style=\\\"width: 70%; text-align: left;\\\" data-field=\\\"po-number\\\">\".concat(value,\"</td></tr></table></td></tr>\");}const genericValue=field.value||getPOFieldValue(field.id,'');return\"<tr><td style=\\\"text-align: right;\\\" data-field=\\\"\".concat(field.id,\"\\\">\").concat(genericValue,\"</td></tr>\");}).join('');// Side-aware padding: when PO is on the left, push it away from the right column\nconst poTdPadding=position==='left'?'padding-right: 56px;':'padding-left: 28px;';return\"\\n      <td style=\\\"width: 35%; \".concat(poTdPadding,\"\\\" align=\\\"right\\\" data-section=\\\"purchase-order-info\\\">\\n        <table>\\n          \").concat(fieldRows,\"\\n        </table>\\n      </td>\\n    \");};// Build Vendor-ShipTo Section XML with dynamic ordering\nconst buildVendorShipToSectionXML=()=>{var _data$sectionOrder2,_data$sectionOrder3;// Get section order from data, default to [section3, section4] if not provided\nconst sectionOrder=((_data$sectionOrder2=data.sectionOrder)===null||_data$sectionOrder2===void 0?void 0:_data$sectionOrder2.sections3And4)||['section3','section4'];const leftSection=sectionOrder[0];const rightSection=sectionOrder[1];console.log('🔀 Building vendor-shipTo section with order:',{leftSection,rightSection});console.log('🔀 sections3And4 array:',(_data$sectionOrder3=data.sectionOrder)===null||_data$sectionOrder3===void 0?void 0:_data$sectionOrder3.sections3And4);let leftColumn,rightColumn;if(leftSection==='section3'){// Default order: Vendor left, Ship To right\nleftColumn=buildVendorXML();rightColumn=buildShipToXML();console.log('🔀 Using default order: Vendor left, Ship To right');}else{// Swapped order: Ship To left, Vendor right\nleftColumn=buildShipToXML();rightColumn=buildVendorXML();console.log('🔀 Using swapped order: Ship To left, Vendor right');}return\"\\n      <table style=\\\"margin-top: 20px;\\\" data-section=\\\"vendor-ship-to\\\">\\n        <tr>\\n          \".concat(leftColumn,\"\\n          \").concat(rightColumn,\"\\n        </tr>\\n      </table>\\n    \");};// Build Shipping Details XML (REQUISITIONER, SHIP VIA, F.O.B., SHIPPING TERMS)\nconst buildShippingDetailsXML=()=>{return\"\\n      <table style=\\\"margin-top: 15px;\\\" data-section=\\\"shipping-details\\\">\\n        <tr>\\n          <td class=\\\"section-header\\\" style=\\\"width: 25%;\\\">REQUISITIONER</td>\\n          <td class=\\\"section-header\\\" style=\\\"width: 25%;\\\">SHIP VIA</td>\\n          <td class=\\\"section-header\\\" style=\\\"width: 25%;\\\">F.O.B.</td>\\n          <td class=\\\"section-header\\\" style=\\\"width: 25%;\\\">SHIPPING TERMS</td>\\n        </tr>\\n        <tr>\\n          <td class=\\\"section-content\\\" data-field=\\\"requisitioner\\\">\".concat(getShippingFieldValue('requisitioner','[Requisitioner]'),\"</td>\\n          <td class=\\\"section-content\\\" data-field=\\\"shipVia\\\">\").concat(getShippingFieldValue('shipVia','[Ship Via]'),\"</td>\\n          <td class=\\\"section-content\\\" data-field=\\\"fob\\\">\").concat(getShippingFieldValue('fob','[FOB]'),\"</td>\\n          <td class=\\\"section-content\\\" data-field=\\\"shippingTerms\\\">\").concat(getShippingFieldValue('shippingTerms','[Shipping Terms]'),\"</td>\\n        </tr>\\n      </table>\\n    \");};// Build Vendor-ShipTo AND Shipping Details sections with vertical swapping\nconst buildVendorShipToAndShippingDetailsXML=()=>{var _data$sectionOrder4,_data$sectionOrder5;// Get section order from data, default to [sections3And4, sections5And6] if not provided\nconst sectionOrder=((_data$sectionOrder4=data.sectionOrder)===null||_data$sectionOrder4===void 0?void 0:_data$sectionOrder4.sections3And4And5And6)||['sections3And4','sections5And6'];const topSection=sectionOrder[0];const bottomSection=sectionOrder[1];console.log('🔀 Building vendor-shipTo + shipping details with order:',{topSection,bottomSection});console.log('🔀 sections3And4And5And6 array:',(_data$sectionOrder5=data.sectionOrder)===null||_data$sectionOrder5===void 0?void 0:_data$sectionOrder5.sections3And4And5And6);let topContent,bottomContent;if(topSection==='sections3And4'){// Default order: Vendor-ShipTo on top, Shipping Details below\ntopContent=buildVendorShipToSectionXML();bottomContent=buildShippingDetailsXML();console.log('🔀 Using default order: Vendor-ShipTo top, Shipping Details bottom');}else{// Swapped order: Shipping Details on top, Vendor-ShipTo below\ntopContent=buildShippingDetailsXML();bottomContent=buildVendorShipToSectionXML();console.log('🔀 Using swapped order: Shipping Details top, Vendor-ShipTo bottom');}return\"\\n      \".concat(topContent,\"\\n      \").concat(bottomContent,\"\\n    \");};// Build Header Section XML (Company + Purchase Order) with dynamic ordering\nconst buildHeaderSectionXML=()=>{var _data$sectionOrder6,_data$sectionOrder7,_data$sectionOrder8,_data$sectionOrder9,_data$sectionOrder9$s,_data$sectionOrder0,_fieldOrderData$compa4,_fieldOrderData$purch2;// Get section order from data, default to [section1, section2] if not provided\nconst sectionOrder=((_data$sectionOrder6=data.sectionOrder)===null||_data$sectionOrder6===void 0?void 0:_data$sectionOrder6.sections1And2)||['section1','section2'];const leftSection=sectionOrder[0];const rightSection=sectionOrder[1];console.log('🔀 Building header section with order:',{leftSection,rightSection});console.log('🔀 Full sectionOrder data:',data.sectionOrder);console.log('🔀 Full data object keys:',Object.keys(data));console.log('🔀 sections1And2 array:',(_data$sectionOrder7=data.sectionOrder)===null||_data$sectionOrder7===void 0?void 0:_data$sectionOrder7.sections1And2);console.log('🔀 sections1And2 type:',typeof((_data$sectionOrder8=data.sectionOrder)===null||_data$sectionOrder8===void 0?void 0:_data$sectionOrder8.sections1And2));console.log('🔀 sections1And2 length:',(_data$sectionOrder9=data.sectionOrder)===null||_data$sectionOrder9===void 0?void 0:(_data$sectionOrder9$s=_data$sectionOrder9.sections1And2)===null||_data$sectionOrder9$s===void 0?void 0:_data$sectionOrder9$s.length);console.log('🔀 sections1And2 values:',JSON.stringify((_data$sectionOrder0=data.sectionOrder)===null||_data$sectionOrder0===void 0?void 0:_data$sectionOrder0.sections1And2));// DEBUG: Check field order data when building header\nconsole.log('🔍 DEBUG: fieldOrderData.companyFields when building header:',(_fieldOrderData$compa4=fieldOrderData.companyFields)===null||_fieldOrderData$compa4===void 0?void 0:_fieldOrderData$compa4.map(f=>({id:f.id,label:f.label})));console.log('🔍 DEBUG: fieldOrderData.purchaseOrderFields when building header:',(_fieldOrderData$purch2=fieldOrderData.purchaseOrderFields)===null||_fieldOrderData$purch2===void 0?void 0:_fieldOrderData$purch2.map(f=>({id:f.id,label:f.label})));// IMPORTANT: Field order should be completely independent of section order\n// Always use the current field order from fieldOrderData, regardless of section position\nconsole.log('🔍 DEBUG: Ensuring field order independence from section order');let leftColumn,rightColumn;if(leftSection==='section1'){// Company on left, Purchase Order on right\nleftColumn=buildCompanyXML('left');rightColumn=buildPurchaseOrderXML('right');console.log('🔀 Using default order: Company left, Purchase Order right');}else{// Purchase Order on left, Company on right (sections swapped)\nleftColumn=buildPurchaseOrderXML('left');rightColumn=buildCompanyXML('right');console.log('🔀 Using swapped order: Purchase Order left, Company right');}// DEBUG: Verify that field order is preserved regardless of section position\nconsole.log('🔍 DEBUG: Field order verification - Company fields should maintain custom order');console.log('🔍 DEBUG: Final company XML will use fieldOrderData.companyFields order');return\"\\n      <table>\\n        <tr>\\n          \".concat(leftColumn,\"\\n          \").concat(rightColumn,\"\\n        </tr>\\n      </table>\\n    \");};// Build Vendor Information XML\nconst buildVendorXML=()=>{var _data$fieldOrder3;// Get field order for vendor; fallback to current array order if not provided\nconst vendorFields=fieldOrderData.vendorFields||[];const vendorFieldOrder=((_data$fieldOrder3=data.fieldOrder)===null||_data$fieldOrder3===void 0?void 0:_data$fieldOrder3.vendor)||vendorFields.map(f=>f.id);const orderedVendorFields=vendorFieldOrder.map(fieldId=>vendorFields.find(f=>f.id===fieldId)).filter(Boolean);const rows=orderedVendorFields.map(f=>{let value=f.value||getVendorFieldValue(f.id,'');let prefix='';if(f.id==='vendor-phone')prefix='Phone: ';if(f.id==='vendor-fax')prefix='Fax: ';return\"\".concat(prefix,\"<span data-field=\\\"\").concat(f.id,\"\\\">\").concat(value,\"</span>\");}).join('<br/>');return\"\\n      <td style=\\\"width: 50%;\\\" data-subsection=\\\"vendor\\\">\\n        <table>\\n          <tr>\\n            <td class=\\\"section-header\\\">VENDOR</td>\\n          </tr>\\n          <tr>\\n            <td class=\\\"section-content\\\">\".concat(rows,\"</td>\\n          </tr>\\n        </table>\\n      </td>\\n    \");};// Build Ship To Information XML\nconst buildShipToXML=()=>{var _data$fieldOrder4;// Get field order for ship-to; fallback to current array order if not provided\nconst shipToFields=fieldOrderData.shipToFields||[];const shipToFieldOrder=((_data$fieldOrder4=data.fieldOrder)===null||_data$fieldOrder4===void 0?void 0:_data$fieldOrder4.shipTo)||shipToFields.map(f=>f.id);const orderedShipToFields=shipToFieldOrder.map(fieldId=>shipToFields.find(f=>f.id===fieldId)).filter(Boolean);const rows=orderedShipToFields.map(f=>{let value=f.value||getShipToFieldValue(f.id,'');let prefix='';if(f.id==='ship-to-phone')prefix='Phone: ';if(f.id==='ship-to-fax')prefix='Fax: ';return\"\".concat(prefix,\"<span data-field=\\\"\").concat(f.id,\"\\\">\").concat(value,\"</span>\");}).join('<br/>');return\"\\n      <td style=\\\"width: 50%;\\\" data-subsection=\\\"ship-to\\\">\\n        <table>\\n          <tr>\\n            <td class=\\\"section-header\\\">SHIP TO</td>\\n          </tr>\\n          <tr>\\n            <td class=\\\"section-content\\\">\".concat(rows,\"</td>\\n          </tr>\\n        </table>\\n      </td>\\n    \");};// Build Vendor/Ship-To Section XML with dynamic ordering\nconst buildVendorShipToXML=()=>{var _data$sectionOrder1;// Get section order from data, default to [section3, section4] if not provided\nconst sectionOrder=((_data$sectionOrder1=data.sectionOrder)===null||_data$sectionOrder1===void 0?void 0:_data$sectionOrder1.sections3And4)||['section3','section4'];const leftSection=sectionOrder[0];const rightSection=sectionOrder[1];console.log('🔀 Building vendor/ship-to section with order:',{leftSection,rightSection});let leftColumn,rightColumn;if(leftSection==='section3'){leftColumn=buildVendorXML();rightColumn=buildShipToXML();}else{leftColumn=buildShipToXML();rightColumn=buildVendorXML();}return\"\\n      <table style=\\\"margin-top: 20px;\\\" data-section=\\\"vendor-ship-to\\\">\\n        <tr>\\n          \".concat(leftColumn,\"\\n          \").concat(rightColumn,\"\\n        </tr>\\n      </table>\\n    \");};// Build Line Items XML with dynamic column ordering\nconst buildLineItemsXML=()=>{var _data$sectionOrder10,_data$sectionOrder11;// Get column order from data, default to standard order if not provided\nconst columnOrder=((_data$sectionOrder10=data.sectionOrder)===null||_data$sectionOrder10===void 0?void 0:_data$sectionOrder10.lineItemColumns)||['itemNumber','description','qty','rate','amount'];console.log('🔀 Building line items with column order:',columnOrder);console.log('🔀 Line items data:',data.lineItems);console.log('🔀 Column order from state:',(_data$sectionOrder11=data.sectionOrder)===null||_data$sectionOrder11===void 0?void 0:_data$sectionOrder11.lineItemColumns);// Column configuration mapping\nconst columnConfig={itemNumber:{label:'Item#',colSpan:3,field:'itemNumber'},description:{label:'Description',colSpan:12,field:'description'},qty:{label:'Qty',colSpan:2,field:'qty'},rate:{label:'Rate',colSpan:3,field:'rate'},amount:{label:'Amount',colSpan:3,field:'amount'}};// Build header row\nconst headerRow=columnOrder.map(columnId=>{const config=columnConfig[columnId];return\"<td class=\\\"item-header\\\" colSpan=\\\"\".concat(config.colSpan,\"\\\">\").concat(config.label,\"</td>\");}).join('');// Build data rows using actual line item data\nconst lineItems=data.lineItems||[];const dataRows=Array(5).fill(0).map((_,rowIndex)=>{const rowData=lineItems[rowIndex]||{};const rowCells=columnOrder.map(columnId=>{const config=columnConfig[columnId];const fieldValue=rowData[columnId]||'-';return\"<td colSpan=\\\"\".concat(config.colSpan,\"\\\">\").concat(fieldValue,\"</td>\");}).join('');return\"<tr data-row-id=\\\"line-item-\".concat(rowIndex,\"\\\" data-row-index=\\\"\").concat(rowIndex,\"\\\">\").concat(rowCells,\"</tr>\");}).join('');return\"\\n      <table style=\\\"margin-top: 15px;\\\" data-section=\\\"line-items\\\">\\n        <tr>\\n          \".concat(headerRow,\"\\n        </tr>\\n        \").concat(dataRows,\"\\n      </table>\\n    \");};// Build Comments Section XML\nconst buildCommentsXML=()=>{const comments=getFieldValue('comments','[Enter comments or special instructions...]');return\"\\n      <td style=\\\"width: 50%;\\\" data-section=\\\"comments\\\">\\n        <table>\\n          <tr>\\n            <td class=\\\"comments-header\\\">Comments or Special Instructions</td>\\n          </tr>\\n          <tr>\\n            <td class=\\\"comments-content\\\">\".concat(comments,\"</td>\\n          </tr>\\n        </table>\\n      </td>\\n    \");};// Build Totals Section XML\nconst buildTotalsXML=()=>{const subtotal=getTotalsFieldValue('subtotal','$0.00');const tax=getTotalsFieldValue('tax','$0.00');const shipping=getTotalsFieldValue('shipping','$0.00');const other=getTotalsFieldValue('other','$0.00');const total=getTotalsFieldValue('total','$0.00');return\"\\n      <td style=\\\"width: 50%;\\\" data-section=\\\"totals\\\">\\n        <table>\\n          <tr>\\n            <td class=\\\"section-header\\\">Totals</td>\\n          </tr>\\n          <tr>\\n            <td class=\\\"section-content\\\">\\n              <div>SUBTOTAL: \".concat(subtotal,\"</div>\\n              <div>TAX: \").concat(tax,\"</div>\\n              <div>SHIPPING: \").concat(shipping,\"</div>\\n              <div>OTHER: \").concat(other,\"</div>\\n              <div class=\\\"total-final\\\">TOTAL: \").concat(total,\"</div>\\n            </td>\\n          </tr>\\n        </table>\\n      </td>\\n    \");};// Build Comments and Totals Section XML with dynamic ordering\nconst buildCommentsTotalsXML=()=>{var _data$sectionOrder12;// Get section order from data, default to [section8, section9] if not provided\nconst sectionOrder=((_data$sectionOrder12=data.sectionOrder)===null||_data$sectionOrder12===void 0?void 0:_data$sectionOrder12.sections8And9)||['section8','section9'];const leftSection=sectionOrder[0];const rightSection=sectionOrder[1];console.log('🔀 Building comments/totals section with order:',{leftSection,rightSection});let leftColumn,rightColumn;if(leftSection==='section8'){leftColumn=buildCommentsXML();rightColumn=buildTotalsXML();}else{leftColumn=buildTotalsXML();rightColumn=buildCommentsXML();}return\"\\n      <table style=\\\"margin-top: 15px;\\\" data-section=\\\"comments-totals\\\">\\n        <tr>\\n          \".concat(leftColumn,\"\\n          \").concat(rightColumn,\"\\n        </tr>\\n      </table>\\n    \");};// Helper function to get shipping details field values with dynamic ID support\nconst getShippingFieldValue=function(fieldType){let defaultValue=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';const possibleSelectors=[\".shipping-field-\".concat(fieldType,\" .editable-field\"),\".shipping-field[data-field=\\\"\".concat(fieldType,\"\\\"] .editable-field\"),\".shipping-\".concat(fieldType,\" .editable-field\"),\"#shipping-\".concat(fieldType),\"[data-shipping-field=\\\"\".concat(fieldType,\"\\\"]\")];// Try to get value from DOM or data object\nif(data[fieldType]){return data[fieldType];}// Try DOM selectors\nfor(const selector of possibleSelectors){const element=document.querySelector(selector);if(element&&element.textContent.trim()){return element.textContent.trim();}}return defaultValue;};// Helper function to get line item values with dynamic ID support\nconst getLineItemValue=function(rowIndex,fieldType){let defaultValue=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'';const possibleSelectors=[\"#line-item-\".concat(rowIndex,\"-\").concat(fieldType),\".line-item-row[data-row=\\\"\".concat(rowIndex,\"\\\"] .\").concat(fieldType,\"-field\"),\".itemtable tbody tr:nth-child(\".concat(rowIndex+1,\") .\").concat(fieldType,\"-field .editable-field\"),\".itemtable tbody tr:nth-child(\".concat(rowIndex+1,\") td:nth-child(\").concat(getColumnIndex(fieldType),\") .editable-field\")];// Try data object first\nif(data.lineItems&&data.lineItems[rowIndex]&&data.lineItems[rowIndex][fieldType]){return data.lineItems[rowIndex][fieldType];}// Try DOM selectors\nfor(const selector of possibleSelectors){const element=document.querySelector(selector);if(element&&element.textContent.trim()){return element.textContent.trim();}}return defaultValue;};// Helper function to get column index for line items\nconst getColumnIndex=fieldType=>{const columnMap={itemNumber:2,description:3,quantity:4,unitPrice:5,total:6};return columnMap[fieldType]||1;};// Helper function to get totals field values with dynamic ID support\nconst getTotalFieldValue=function(fieldType){let defaultValue=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';const possibleSelectors=[\"#total-\".concat(fieldType),\".total-\".concat(fieldType,\" .editable-field\"),\".total-row[data-field=\\\"\".concat(fieldType,\"\\\"] .editable-field\"),\".totals-section .\".concat(fieldType,\"-field .editable-field\")];// Try data object first\nif(data[fieldType]){return data[fieldType];}// Try DOM selectors\nfor(const selector of possibleSelectors){const element=document.querySelector(selector);if(element&&element.textContent.trim()){return element.textContent.trim();}}return defaultValue;};// Helper function to get comments field value with dynamic ID support\nconst getCommentsValue=function(){let defaultValue=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';const possibleSelectors=['#comments-field','.comments-content .editable-field','.comments-section .editable-field','[data-field=\"comments\"]'];// Try data object first\nif(data.comments){return data.comments;}// Try DOM selectors\nfor(const selector of possibleSelectors){const element=document.querySelector(selector);if(element&&element.textContent.trim()){return element.textContent.trim();}}return defaultValue;};// Helper function to get contact info field value with dynamic ID support\nconst getContactInfoValue=function(){let defaultValue=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';const possibleSelectors=['#contact-info-field','.contact-section .editable-field','.contact-info .editable-field','[data-field=\"contactInfo\"]'];// Try data object first\nif(data.contactInfo){return data.contactInfo;}// Try DOM selectors\nfor(const selector of possibleSelectors){const element=document.querySelector(selector);if(element&&element.textContent.trim()){return element.textContent.trim();}}return defaultValue;};// Generate line items XML with dynamic ID support\nconst generateLineItemsXML=()=>{const maxRows=5;// Standard number of line item rows\n// Generate rows (either from data or empty placeholder rows)\nreturn Array(maxRows).fill(0).map((_,index)=>{// Try to get values using dynamic ID system\nconst itemNumber=getLineItemValue(index,'itemNumber','-');const description=getLineItemValue(index,'description','-');const quantity=getLineItemValue(index,'quantity','-');const unitPrice=getLineItemValue(index,'unitPrice','-');const total=getLineItemValue(index,'total','-');return\"\\n        <tr data-row-id=\\\"line-item-\".concat(index,\"\\\" data-row-index=\\\"\").concat(index,\"\\\">\\n            <td class=\\\"item-cell\\\" align=\\\"left\\\" colspan=\\\"3\\\" data-field=\\\"itemNumber\\\" data-row=\\\"\").concat(index,\"\\\">\").concat(itemNumber,\"</td>\\n            <td class=\\\"item-cell\\\" align=\\\"left\\\" colspan=\\\"12\\\" data-field=\\\"description\\\" data-row=\\\"\").concat(index,\"\\\">\").concat(description,\"</td>\\n            <td class=\\\"item-cell\\\" align=\\\"center\\\" colspan=\\\"2\\\" data-field=\\\"quantity\\\" data-row=\\\"\").concat(index,\"\\\">\").concat(quantity,\"</td>\\n            <td class=\\\"item-cell\\\" align=\\\"right\\\" colspan=\\\"3\\\" data-field=\\\"unitPrice\\\" data-row=\\\"\").concat(index,\"\\\">\").concat(unitPrice,\"</td>\\n            <td class=\\\"item-cell\\\" align=\\\"right\\\" colspan=\\\"3\\\" data-field=\\\"total\\\" data-row=\\\"\").concat(index,\"\\\">\").concat(total,\"</td>\\n        </tr>\");}).join('');};// Generate the complete XML using the new template structure\nconst xml=\"<?xml version=\\\"1.0\\\"?>\\n<!DOCTYPE pdf PUBLIC \\\"-//big.faceless.org//report\\\" \\\"report-1.1.dtd\\\">\\n<pdf>\\n<head>\\n    <meta name=\\\"title\\\" value=\\\"Purchase Order\\\"/>\\n    <meta name=\\\"author\\\" value=\\\"Purchase Order Generator\\\"/>\\n    <meta name=\\\"subject\\\" value=\\\"Purchase Order\\\"/>\\n    <meta name=\\\"creator\\\" value=\\\"Purchase Order Generator\\\"/>\\n    <meta name=\\\"producer\\\" value=\\\"Purchase Order Generator\\\"/>\\n    <meta name=\\\"creationDate\\\" value=\\\"\".concat(new Date().toISOString(),\"\\\"/>\\n    <meta name=\\\"modDate\\\" value=\\\"\").concat(new Date().toISOString(),\"\\\"/>\\n    <link name=\\\"NotoSans\\\" type=\\\"font\\\" subtype=\\\"truetype\\\" src=\\\"${nsfont.NotoSans_Regular}\\\" src-bold=\\\"${nsfont.NotoSans_Bold}\\\" src-italic=\\\"${nsfont.NotoSans_Italic}\\\" src-bolditalic=\\\"${nsfont.NotoSans_BoldItalic}\\\" bytes=\\\"2\\\" />\\n    <style>\\n        * { font-family: NotoSans, sans-serif; font-size: 9pt; }\\n        table { width: 100%; border-collapse: collapse; }\\n        .header-company { font-size: 14pt; font-weight: bold; }\\n        .header-title { font-size: 20pt; font-weight: bold; background-color: #333333; color: #ffffff; padding: 6px; border: 1px solid #000; }\\n        .header-info { font-size: 10pt; }\\n        .section-header { background-color: #333333; color: #ffffff; font-weight: bold; padding: 6px; border: 1px solid #000; }\\n        .section-content { padding: 6px; border: 1px solid #000; vertical-align: top; }\\n        .item-header { background-color: #333333; color: #ffffff; font-weight: bold; padding: 8px; border: 1px solid #000; }\\n        .item-cell { padding: 6px; border: 1px solid #000; }\\n        .total-label { font-weight: bold; padding: 4px; }\\n        .total-amount { font-weight: bold; padding: 4px; background-color: #ffff99; }\\n        .comments-header { background-color: #333333; color: #ffffff; font-weight: bold; padding: 6px; border: 1px solid #000; }\\n        .comments-content { padding: 6px; border: 1px solid #000; min-height: 40px; }\\n        .contact-info { font-size: 8pt; }\\n    </style>\\n</head>\\n<body padding=\\\"0.5in\\\" size=\\\"Letter\\\">\\n    \\n    \").concat(buildHeaderSectionXML(),\"\\n    \").concat(buildVendorShipToAndShippingDetailsXML(),\"\\n\\n\\n    \").concat(buildLineItemsXML(),\"\\n\\n\\n    \").concat(buildCommentsTotalsXML(),\"\\n\\n\\n\\n    <table style=\\\"margin-top: 20px;\\\" data-section=\\\"contact-signature\\\">\\n        <tr>\\n            <td class=\\\"contact-info\\\" style=\\\"width: 70%;\\\" data-field=\\\"contact-info\\\">\\n                \").concat(getContactInfoValue('For inquiries, please contact us'),\"\\n            </td>\\n            <td style=\\\"width: 30%; text-align: center;\\\" data-field=\\\"signature\\\">\\n                <table style=\\\"width: 100%;\\\">\\n                    <tr>\\n                        <td style=\\\"border-top: 1px solid #000; padding-top: 10px;\\\">\\n                            Authorized Signature\\n                        </td>\\n                    </tr>\\n                </table>\\n            </td>\\n        </tr>\\n    </table>\\n</body>\\n</pdf>\");console.log('✅ DYNAMIC ID TEMPLATE: XML generated successfully with dynamic field support');console.log('📄 XML preview (first 200 chars):',xml.substring(0,200));return xml;}// Export the template structure for reference with dynamic ID support\nexport const purchaseOrderTemplate={companyInfo:{staticFields:['company-name','company-address','company-city-state','company-phone','company-fax','company-website'],dynamicPrefixes:['company-field-','company-'],dataAttribute:'data-section=\"company-info\"'},purchaseOrder:{staticFields:['po-title','po-date','po-number'],dynamicPrefixes:['po-field-','po-'],dataAttribute:'data-section=\"purchase-order-info\"'},vendor:{staticFields:['vendor-company','vendor-contact','vendor-address','vendor-city-state','vendor-phone','vendor-fax'],dynamicPrefixes:['vendor-field-','vendor-'],dataAttribute:'data-subsection=\"vendor\"'},shipTo:{staticFields:['ship-to-name','ship-to-company','ship-to-address','ship-to-city-state','ship-to-phone','ship-to-fax'],dynamicPrefixes:['ship-to-field-','ship-to-'],dataAttribute:'data-subsection=\"ship-to\"'},shipping:{staticFields:['requisitioner','shipVia','fob','shippingTerms'],dynamicPrefixes:['shipping-field-','shipping-'],dataAttribute:'data-section=\"shipping-details\"'},lineItems:{staticFields:['itemNumber','description','quantity','unitPrice','total'],dynamicPrefixes:['line-item-','item-'],dataAttribute:'data-section=\"line-items\"',maxRows:5},totals:{staticFields:['subtotal','tax','shipping','other','total'],dynamicPrefixes:['total-','totals-'],dataAttribute:'data-subsection=\"totals\"'},comments:{staticFields:['comments'],dynamicPrefixes:['comments-field-','comment-'],dataAttribute:'data-subsection=\"comments\"'},contact:{staticFields:['contactInfo'],dynamicPrefixes:['contact-info-field-','contact-'],dataAttribute:'data-section=\"contact-signature\"'}};// Export a simple function to get template structure\nexport function getTemplateStructure(){return purchaseOrderTemplate;}// Dynamic ID Generation Utilities\nexport const dynamicIdUtils={// Generate a new dynamic ID with timestamp and random component\ngenerateId:function(){let prefix=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'field';let section=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'general';const timestamp=Date.now();const random=Math.random().toString(36).substr(2,9);return\"\".concat(section,\"-\").concat(prefix,\"-\").concat(timestamp,\"-\").concat(random);},// Generate multiple possible IDs for a field to try when looking up values\ngetPossibleIds:function(staticId){let section=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'unknown';const baseName=staticId.replace(/^(company-|po-|vendor-|ship-to-)/,'');return[staticId,// Try static ID first\n\"\".concat(section,\"-field-\").concat(staticId),\"\".concat(section,\"-\").concat(baseName),\"\".concat(staticId,\"-\").concat(Date.now()),\"field-\".concat(baseName),baseName];},// Validate if an ID follows our dynamic ID pattern\nisValidDynamicId:id=>{const dynamicPattern=/^[a-z-]+-(field-)?[a-z-]+(-\\d+)?(-[a-z0-9]+)?$/;return dynamicPattern.test(id);},// Extract the base field type from any ID (static or dynamic)\ngetFieldType:id=>{// Remove common prefixes and suffixes to get the core field type\nreturn id.replace(/^(company-|po-|vendor-|ship-to-|shipping-|total-|line-item-|comments-|contact-)/,'').replace(/-(field-)?(\\d+)?(-[a-z0-9]+)?$/,'').replace(/^(field-)?/,'');},// Get section from ID\ngetSection:id=>{if(id.startsWith('company-'))return'company';if(id.startsWith('po-'))return'purchase-order';if(id.startsWith('vendor-'))return'vendor';if(id.startsWith('ship-to-'))return'ship-to';if(id.startsWith('shipping-'))return'shipping';if(id.startsWith('line-item-'))return'line-items';if(id.startsWith('total-'))return'totals';if(id.startsWith('comments-'))return'comments';if(id.startsWith('contact-'))return'contact';return'unknown';}};// Field Mapping Utilities\nexport const fieldMappingUtils={// Map all known static field IDs to their readable names\nstaticFieldNames:{// Company fields\n'company-name':'Company Name','company-address':'Street Address','company-city-state':'City, State, ZIP','company-phone':'Phone Number','company-fax':'Fax Number','company-website':'Website',// Purchase Order fields\n'po-title':'Purchase Order Title','po-date':'Date','po-number':'PO Number',// Vendor fields\n'vendor-company':'Vendor Company','vendor-contact':'Vendor Contact','vendor-address':'Vendor Address','vendor-city-state':'Vendor City/State','vendor-phone':'Vendor Phone','vendor-fax':'Vendor Fax',// Ship To fields\n'ship-to-name':'Ship To Name','ship-to-company':'Ship To Company','ship-to-address':'Ship To Address','ship-to-city-state':'Ship To City/State','ship-to-phone':'Ship To Phone','ship-to-fax':'Ship To Fax',// Shipping fields\n'requisitioner':'Requisitioner','shipVia':'Ship Via','fob':'F.O.B.','shippingTerms':'Shipping Terms',// Line item fields\n'itemNumber':'Item Number','description':'Description','quantity':'Quantity','unitPrice':'Unit Price','total':'Total',// Totals fields\n'subtotal':'Subtotal','tax':'Tax','shipping':'Shipping','other':'Other',// Other fields\n'comments':'Comments','contactInfo':'Contact Information'},// Get human-readable name for any field ID\ngetFieldName:id=>{const staticName=fieldMappingUtils.staticFieldNames[id];if(staticName)return staticName;// For dynamic IDs, try to extract the base field type\nconst fieldType=dynamicIdUtils.getFieldType(id);const staticFieldName=fieldMappingUtils.staticFieldNames[fieldType];if(staticFieldName)return staticFieldName;// Fallback: humanize the ID\nreturn id.replace(/[-_]/g,' ').replace(/\\b\\w/g,l=>l.toUpperCase());},// Get all field IDs for a section\ngetFieldsForSection:section=>{const template=purchaseOrderTemplate[section];return template?template.staticFields:[];}};","map":{"version":3,"names":["processFormData","generatePurchaseOrderXML","formData","_fieldOrderData$compa","_fieldOrderData$purch","_formData$companyFiel","_data$companyFields","_fieldOrderData$compa2","_fieldOrderData$compa3","options","arguments","length","undefined","console","log","Date","toISOString","processedData","calculateTotals","validate","formatForXML","throwOnValidationError","error","data","fieldOrderData","_objectSpread","companyFields","purchaseOrderFields","vendorFields","shipToFields","map","f","id","label","Array","isArray","warn","getFieldValue","fieldName","defaultValue","getDynamicFieldValue","fieldArray","possibleIds","fieldId","field","find","value","getCompanyFieldValue","staticId","concat","now","filter","includes","replace","getPOFieldValue","getVendorFieldValue","getShipToFieldValue","getTotalsFieldValue","totalsFields","buildCompanyXML","_data$fieldOrder","_data$sectionOrder","position","fieldOrder","company","sectionOrder","sections1And2","indexOf","orderedCompanyFields","Boolean","fieldRows","index","fieldValue","placeholder","isHeader","row","displayText","join","companyTdPadding","result","buildPurchaseOrderXML","_data$fieldOrder2","purchaseOrder","orderedPOFields","isTitle","genericValue","poTdPadding","buildVendorShipToSectionXML","_data$sectionOrder2","_data$sectionOrder3","sections3And4","leftSection","rightSection","leftColumn","rightColumn","buildVendorXML","buildShipToXML","buildShippingDetailsXML","getShippingFieldValue","buildVendorShipToAndShippingDetailsXML","_data$sectionOrder4","_data$sectionOrder5","sections3And4And5And6","topSection","bottomSection","topContent","bottomContent","buildHeaderSectionXML","_data$sectionOrder6","_data$sectionOrder7","_data$sectionOrder8","_data$sectionOrder9","_data$sectionOrder9$s","_data$sectionOrder0","_fieldOrderData$compa4","_fieldOrderData$purch2","Object","keys","JSON","stringify","_data$fieldOrder3","vendorFieldOrder","vendor","orderedVendorFields","rows","prefix","_data$fieldOrder4","shipToFieldOrder","shipTo","orderedShipToFields","buildVendorShipToXML","_data$sectionOrder1","buildLineItemsXML","_data$sectionOrder10","_data$sectionOrder11","columnOrder","lineItemColumns","lineItems","columnConfig","itemNumber","colSpan","description","qty","rate","amount","headerRow","columnId","config","dataRows","fill","_","rowIndex","rowData","rowCells","buildCommentsXML","comments","buildTotalsXML","subtotal","tax","shipping","other","total","buildCommentsTotalsXML","_data$sectionOrder12","sections8And9","fieldType","possibleSelectors","selector","element","document","querySelector","textContent","trim","getLineItemValue","getColumnIndex","columnMap","quantity","unitPrice","getTotalFieldValue","getCommentsValue","getContactInfoValue","contactInfo","generateLineItemsXML","maxRows","xml","substring","purchaseOrderTemplate","companyInfo","staticFields","dynamicPrefixes","dataAttribute","totals","contact","getTemplateStructure","dynamicIdUtils","generateId","section","timestamp","random","Math","toString","substr","getPossibleIds","baseName","isValidDynamicId","dynamicPattern","test","getFieldType","getSection","startsWith","fieldMappingUtils","staticFieldNames","getFieldName","staticName","staticFieldName","l","toUpperCase","getFieldsForSection","template"],"sources":["/Users/waleed/Documents/GitHub/Cadbury3/src/templates/PurchaseOrderTemplate.js"],"sourcesContent":["// Purchase Order XML Template for NetSuite Integration\n// This template generates XML compatible with Big Faceless Report Generator (BFR)\n\nimport { processFormData } from './FormDataMapper';\n\n// Function to generate XML from React form data\nexport function generatePurchaseOrderXML(formData, options = {}) {\n  // DEBUG: Log that we're using the DYNAMIC ID template\n  console.log('🚀 DYNAMIC ID TEMPLATE VERSION LOADED - generatePurchaseOrderXML called');\n  console.log('📅 Template updated at:', new Date().toISOString());\n  console.log('📊 Raw form data received:', formData);\n  \n  // Process and validate form data using the FormDataMapper\n  let processedData;\n  try {\n    processedData = processFormData(formData, {\n      calculateTotals: options.calculateTotals !== false,\n      validate: options.validate !== false,\n      formatForXML: true,\n      throwOnValidationError: options.throwOnValidationError || false\n    });\n    console.log('📊 Processed form data:', processedData);\n  } catch (error) {\n    console.error('❌ Form data processing failed:', error);\n    if (options.throwOnValidationError) {\n      throw error;\n    }\n    // Fallback to using raw data\n    processedData = formData || {};\n  }\n  \n  // Use processed data for XML generation, fallback to original data\n  // BUT preserve the original field order from formData for dynamic ordering\n  const data = processedData || formData || {};\n  \n  // IMPORTANT: For field ordering, use the original formData to preserve drag-and-drop order\n  const fieldOrderData = {\n    ...data,\n    companyFields: formData.companyFields || data.companyFields || [],\n    purchaseOrderFields: formData.purchaseOrderFields || data.purchaseOrderFields || [],\n    vendorFields: formData.vendorFields || data.vendorFields || [],\n    shipToFields: formData.shipToFields || data.shipToFields || []\n  };\n  \n  // DEBUG: Log field order data creation\n  console.log('🔍 DEBUG: fieldOrderData created with:');\n  console.log('🔍 DEBUG: - companyFields:', fieldOrderData.companyFields?.map(f => ({ id: f.id, label: f.label })));\n  console.log('🔍 DEBUG: - purchaseOrderFields:', fieldOrderData.purchaseOrderFields?.map(f => ({ id: f.id, label: f.label })));\n  console.log('🔍 DEBUG: - formData.companyFields:', formData.companyFields?.map(f => ({ id: f.id, label: f.label })));\n  console.log('🔍 DEBUG: - data.companyFields:', data.companyFields?.map(f => ({ id: f.id, label: f.label })));\n  \n  // VALIDATION: Ensure field order data is robust and independent of section order\n  console.log('🔍 DEBUG: Field order data validation:');\n  console.log('🔍 DEBUG: - fieldOrderData.companyFields length:', fieldOrderData.companyFields?.length);\n  console.log('🔍 DEBUG: - fieldOrderData.companyFields is array:', Array.isArray(fieldOrderData.companyFields));\n  console.log('🔍 DEBUG: - fieldOrderData.companyFields IDs:', fieldOrderData.companyFields?.map(f => f.id));\n  \n  // Ensure field order data is always available and valid\n  if (!Array.isArray(fieldOrderData.companyFields) || fieldOrderData.companyFields.length === 0) {\n    console.warn('⚠️ WARNING: companyFields is not available or empty, this may cause field order issues');\n  }\n  \n  // Helper function to safely get field values with fallbacks (for simple fields)\n  const getFieldValue = (fieldName, defaultValue = '') => {\n    return data[fieldName] || defaultValue;\n  };\n\n  // Enhanced helper function to get field values by dynamic ID or static fallback\n  const getDynamicFieldValue = (fieldArray, possibleIds, defaultValue = '') => {\n    if (!fieldArray || !Array.isArray(fieldArray)) {\n      return defaultValue;\n    }\n    \n    // Try each possible ID in order of preference\n    for (const fieldId of possibleIds) {\n      const field = fieldArray.find(f => f.id === fieldId);\n      if (field && field.value) {\n        return field.value;\n      }\n    }\n    return defaultValue;\n  };\n\n  // Helper function to get company field values with dynamic ID support\n  const getCompanyFieldValue = (staticId, defaultValue = '') => {\n    if (data.companyFields && Array.isArray(data.companyFields)) {\n      // First try the static ID, then try dynamic IDs that might have been generated\n      const possibleIds = [\n        staticId,\n        `company-field-${staticId}`,\n        `${staticId}-${Date.now()}`,\n        ...data.companyFields.filter(f => f.id.includes(staticId.replace('company-', ''))).map(f => f.id)\n      ];\n      return getDynamicFieldValue(data.companyFields, possibleIds, defaultValue);\n    }\n    return defaultValue;\n  };\n\n  // Helper function to get purchase order field values with dynamic ID support\n  const getPOFieldValue = (staticId, defaultValue = '') => {\n    if (data.purchaseOrderFields && Array.isArray(data.purchaseOrderFields)) {\n      const possibleIds = [\n        staticId,\n        `po-field-${staticId}`,\n        `${staticId}-${Date.now()}`,\n        ...data.purchaseOrderFields.filter(f => f.id.includes(staticId.replace('po-', ''))).map(f => f.id)\n      ];\n      return getDynamicFieldValue(data.purchaseOrderFields, possibleIds, defaultValue);\n    }\n    return defaultValue;\n  };\n\n  // Helper function to get vendor field values with dynamic ID support\n  const getVendorFieldValue = (staticId, defaultValue = '') => {\n    if (data.vendorFields && Array.isArray(data.vendorFields)) {\n      const possibleIds = [\n        staticId,\n        `vendor-field-${staticId}`,\n        `${staticId}-${Date.now()}`,\n        ...data.vendorFields.filter(f => f.id.includes(staticId.replace('vendor-', ''))).map(f => f.id)\n      ];\n      return getDynamicFieldValue(data.vendorFields, possibleIds, defaultValue);\n    }\n    return defaultValue;\n  };\n\n  // Helper function to get ship-to field values with dynamic ID support\n  const getShipToFieldValue = (staticId, defaultValue = '') => {\n    if (data.shipToFields && Array.isArray(data.shipToFields)) {\n      const possibleIds = [\n        staticId,\n        `ship-to-field-${staticId}`,\n        `${staticId}-${Date.now()}`,\n        ...data.shipToFields.filter(f => f.id.includes(staticId.replace('ship-to-', ''))).map(f => f.id)\n      ];\n      return getDynamicFieldValue(data.shipToFields, possibleIds, defaultValue);\n    }\n    return defaultValue;\n  };\n\n  // Helper function to get totals field values with dynamic ID support\n  const getTotalsFieldValue = (staticId, defaultValue = '') => {\n    if (data.totalsFields && Array.isArray(data.totalsFields)) {\n      const possibleIds = [\n        staticId,\n        `totals-field-${staticId}`,\n        `${staticId}-${Date.now()}`,\n        ...data.totalsFields.filter(f => f.id.includes(staticId)).map(f => f.id)\n      ];\n      return getDynamicFieldValue(data.totalsFields, possibleIds, defaultValue);\n    }\n    return defaultValue;\n  };\n\n  // ============================================================================\n  // MODULAR XML BUILDER FUNCTIONS\n  // ============================================================================\n  \n  // Build Company Information XML with dynamic field ordering (same pattern as section swapping)y\n  \n  const buildCompanyXML = (position = 'left') => {\n    // Get company fields from fieldOrderData to preserve drag-and-drop order\n    const companyFields = fieldOrderData.companyFields || [];\n    \n    // CRITICAL: Get field order from data (same pattern as section order)\n    const fieldOrder = data.fieldOrder?.company || companyFields.map(f => f.id);\n    \n    console.log('🔀 Building company XML with dynamic field ordering');\n    console.log('🔀 Company fields received from data:', companyFields.length);\n    console.log('🔀 Company fields IDs in current order:', companyFields.map(f => f.id));\n    console.log('🔀 Company fields labels in current order:', companyFields.map(f => f.label));\n    console.log('🔀 Company fields values in current order:', companyFields.map(f => f.value));\n    console.log('🔀 Field order from data:', fieldOrder);\n    \n    // CRITICAL: Ensure field order is completely independent of section order\n    // The field order should be preserved exactly as it appears in fieldOrderData.companyFields\n    // regardless of whether this section is on the left or right\n    console.log('🔍 DEBUG: Field order independence verification:');\n    console.log('🔍 DEBUG: - Current section order:', data.sectionOrder?.sections1And2);\n    console.log('🔍 DEBUG: - Company fields order (should be independent):', companyFields.map(f => ({ id: f.id, label: f.label, position: companyFields.indexOf(f) })));\n    \n    // CRITICAL: Reorder fields based on fieldOrder (same pattern as section swapping)\n    const orderedCompanyFields = fieldOrder.map(fieldId => {\n      const field = companyFields.find(f => f.id === fieldId);\n      if (!field) {\n        console.warn(`⚠️ WARNING: Field with ID ${fieldId} not found in companyFields`);\n        return null;\n      }\n      return field;\n    }).filter(Boolean); // Remove any null fields\n    \n    console.log('🔀 Ordered company fields for XML generation:', orderedCompanyFields.map(f => ({ id: f.id, label: f.label, position: orderedCompanyFields.indexOf(f) })));\n    \n    // Build rows dynamically based on ordered field order (same as section swapping)\n    const fieldRows = orderedCompanyFields.map((field, index) => {\n      const fieldValue = field.value || field.placeholder || '';\n      const isHeader = field.id === 'company-name';\n      \n      console.log(`🔀 Processing field ${index}:`, { id: field.id, label: field.label, value: fieldValue, isHeader, position: index });\n      \n      if (isHeader) {\n        const row = `<tr><td class=\"header-company\" style=\"text-align: left;\" data-field=\"${field.id}\">${fieldValue}</td></tr>`;\n        console.log(`🔀 Generated header row for ${field.id}:`, row);\n        return row;\n      } else {\n        // Handle special formatting for phone, fax, website\n        let displayText = fieldValue;\n        if (field.id === 'company-phone') displayText = `Phone: ${fieldValue}`;\n        if (field.id === 'company-fax') displayText = `Fax: ${fieldValue}`;\n        if (field.id === 'company-website') displayText = `Website: ${fieldValue}`;\n        \n        const row = `<tr><td style=\"text-align: left;\" data-field=\"${field.id}\">${displayText}</td></tr>`;\n        console.log(`🔀 Generated regular row for ${field.id}:`, row);\n        return row;\n      }\n    }).join('');\n    \n    console.log('🔀 Final generated fieldRows:', fieldRows);\n    \n    // Side-aware padding to keep spacing consistent when swapped\n    const companyTdPadding = position === 'left' ? 'padding-right: 24px;' : 'padding-left: 36px;';\n    const result = `\n      <td style=\"width: 65%; ${companyTdPadding}\" data-section=\"company-info\">\n        <table>\n          ${fieldRows}\n        </table>\n      </td>\n    `;\n    \n    console.log('🔀 Final company XML result:', result);\n    return result;\n  };\n\n  // Build Purchase Order Information XML\n  const buildPurchaseOrderXML = (position = 'right') => {\n    // Get purchase order fields from fieldOrderData to preserve drag-and-drop order\n    const purchaseOrderFields = fieldOrderData.purchaseOrderFields || [];\n    \n    // CRITICAL: Get field order from data (same pattern as section order)\n    const fieldOrder = data.fieldOrder?.purchaseOrder || purchaseOrderFields.map(f => f.id);\n    \n    console.log('🔀 Building purchase order XML with dynamic field ordering');\n    console.log('🔀 Purchase order fields received from data:', purchaseOrderFields.length);\n    console.log('🔀 Purchase order fields IDs in current order:', purchaseOrderFields.map(f => f.id));\n    console.log('🔀 Field order from data:', fieldOrder);\n    \n    // CRITICAL: Reorder fields based on fieldOrder (same pattern as section swapping)\n    const orderedPOFields = fieldOrder.map(fieldId => {\n      const field = purchaseOrderFields.find(f => f.id === fieldId);\n      if (!field) {\n        console.warn(`⚠️ WARNING: Field with ID ${fieldId} not found in purchaseOrderFields`);\n        return null;\n      }\n      return field;\n    }).filter(Boolean); // Remove any null fields\n    \n    console.log('🔀 Ordered purchase order fields for XML generation:', orderedPOFields.map(f => ({ id: f.id, label: f.label, position: orderedPOFields.indexOf(f) })));\n    \n    // Build XML based on ordered fields\n    const fieldRows = orderedPOFields.map((field, index) => {\n      // Prefer captured value; fallback to template getters to ensure content always present\n      const isTitle = field.id === 'po-title';\n      if (isTitle) {\n        const value = field.value || getPOFieldValue('po-title', 'PURCHASE ORDER');\n        return `<tr><td class=\"header-title\" style=\"text-align: right;\" data-field=\"${field.id}\">${value}</td></tr>`;\n      }\n      if (field.id === 'po-date') {\n        const value = field.value || getPOFieldValue('po-date', 'MM/DD/YYYY');\n        return `<tr><td style=\"text-align: right;\"><table style=\"width: 100%;\"><tr><td class=\"header-info\" style=\"width: 30%; text-align: left;\"><b>DATE</b></td><td class=\"header-info\" style=\"width: 70%; text-align: left;\" data-field=\"po-date\">${value}</td></tr></table></td></tr>`;\n      }\n      if (field.id === 'po-number') {\n        const value = field.value || getPOFieldValue('po-number', '[PO Number]');\n        return `<tr><td style=\"text-align: right;\"><table style=\"width: 100%;\"><tr><td class=\"header-info\" style=\"width: 30%; text-align: left;\"><b>PO #</b></td><td class=\"header-info\" style=\"width: 70%; text-align: left;\" data-field=\"po-number\">${value}</td></tr></table></td></tr>`;\n      }\n      \n      const genericValue = field.value || getPOFieldValue(field.id, '');\n      return `<tr><td style=\"text-align: right;\" data-field=\"${field.id}\">${genericValue}</td></tr>`;\n    }).join('');\n    \n    // Side-aware padding: when PO is on the left, push it away from the right column\n    const poTdPadding = position === 'left' ? 'padding-right: 56px;' : 'padding-left: 28px;';\n    return `\n      <td style=\"width: 35%; ${poTdPadding}\" align=\"right\" data-section=\"purchase-order-info\">\n        <table>\n          ${fieldRows}\n        </table>\n      </td>\n    `;\n  };\n\n\n\n  // Build Vendor-ShipTo Section XML with dynamic ordering\n  const buildVendorShipToSectionXML = () => {\n    // Get section order from data, default to [section3, section4] if not provided\n    const sectionOrder = data.sectionOrder?.sections3And4 || ['section3', 'section4'];\n    const leftSection = sectionOrder[0];\n    const rightSection = sectionOrder[1];\n    \n    console.log('🔀 Building vendor-shipTo section with order:', { leftSection, rightSection });\n    console.log('🔀 sections3And4 array:', data.sectionOrder?.sections3And4);\n    \n    let leftColumn, rightColumn;\n    \n    if (leftSection === 'section3') {\n      // Default order: Vendor left, Ship To right\n      leftColumn = buildVendorXML();\n      rightColumn = buildShipToXML();\n      console.log('🔀 Using default order: Vendor left, Ship To right');\n    } else {\n      // Swapped order: Ship To left, Vendor right\n      leftColumn = buildShipToXML();\n      rightColumn = buildVendorXML();\n      console.log('🔀 Using swapped order: Ship To left, Vendor right');\n    }\n    \n    return `\n      <table style=\"margin-top: 20px;\" data-section=\"vendor-ship-to\">\n        <tr>\n          ${leftColumn}\n          ${rightColumn}\n        </tr>\n      </table>\n    `;\n  };\n\n  // Build Shipping Details XML (REQUISITIONER, SHIP VIA, F.O.B., SHIPPING TERMS)\n  const buildShippingDetailsXML = () => {\n    return `\n      <table style=\"margin-top: 15px;\" data-section=\"shipping-details\">\n        <tr>\n          <td class=\"section-header\" style=\"width: 25%;\">REQUISITIONER</td>\n          <td class=\"section-header\" style=\"width: 25%;\">SHIP VIA</td>\n          <td class=\"section-header\" style=\"width: 25%;\">F.O.B.</td>\n          <td class=\"section-header\" style=\"width: 25%;\">SHIPPING TERMS</td>\n        </tr>\n        <tr>\n          <td class=\"section-content\" data-field=\"requisitioner\">${getShippingFieldValue('requisitioner', '[Requisitioner]')}</td>\n          <td class=\"section-content\" data-field=\"shipVia\">${getShippingFieldValue('shipVia', '[Ship Via]')}</td>\n          <td class=\"section-content\" data-field=\"fob\">${getShippingFieldValue('fob', '[FOB]')}</td>\n          <td class=\"section-content\" data-field=\"shippingTerms\">${getShippingFieldValue('shippingTerms', '[Shipping Terms]')}</td>\n        </tr>\n      </table>\n    `;\n  };\n\n  // Build Vendor-ShipTo AND Shipping Details sections with vertical swapping\n  const buildVendorShipToAndShippingDetailsXML = () => {\n    // Get section order from data, default to [sections3And4, sections5And6] if not provided\n    const sectionOrder = data.sectionOrder?.sections3And4And5And6 || ['sections3And4', 'sections5And6'];\n    const topSection = sectionOrder[0];\n    const bottomSection = sectionOrder[1];\n    \n    console.log('🔀 Building vendor-shipTo + shipping details with order:', { topSection, bottomSection });\n    console.log('🔀 sections3And4And5And6 array:', data.sectionOrder?.sections3And4And5And6);\n    \n    let topContent, bottomContent;\n    \n    if (topSection === 'sections3And4') {\n      // Default order: Vendor-ShipTo on top, Shipping Details below\n      topContent = buildVendorShipToSectionXML();\n      bottomContent = buildShippingDetailsXML();\n      console.log('🔀 Using default order: Vendor-ShipTo top, Shipping Details bottom');\n    } else {\n      // Swapped order: Shipping Details on top, Vendor-ShipTo below\n      topContent = buildShippingDetailsXML();\n      bottomContent = buildVendorShipToSectionXML();\n      console.log('🔀 Using swapped order: Shipping Details top, Vendor-ShipTo bottom');\n    }\n    \n    return `\n      ${topContent}\n      ${bottomContent}\n    `;\n  };\n\n  // Build Header Section XML (Company + Purchase Order) with dynamic ordering\n  const buildHeaderSectionXML = () => {\n    // Get section order from data, default to [section1, section2] if not provided\n    const sectionOrder = data.sectionOrder?.sections1And2 || ['section1', 'section2'];\n    const leftSection = sectionOrder[0];\n    const rightSection = sectionOrder[1];\n    \n    console.log('🔀 Building header section with order:', { leftSection, rightSection });\n    console.log('🔀 Full sectionOrder data:', data.sectionOrder);\n    console.log('🔀 Full data object keys:', Object.keys(data));\n    console.log('🔀 sections1And2 array:', data.sectionOrder?.sections1And2);\n    console.log('🔀 sections1And2 type:', typeof data.sectionOrder?.sections1And2);\n    console.log('🔀 sections1And2 length:', data.sectionOrder?.sections1And2?.length);\n    console.log('🔀 sections1And2 values:', JSON.stringify(data.sectionOrder?.sections1And2));\n    \n    // DEBUG: Check field order data when building header\n    console.log('🔍 DEBUG: fieldOrderData.companyFields when building header:', fieldOrderData.companyFields?.map(f => ({ id: f.id, label: f.label })));\n    console.log('🔍 DEBUG: fieldOrderData.purchaseOrderFields when building header:', fieldOrderData.purchaseOrderFields?.map(f => ({ id: f.id, label: f.label })));\n    \n    // IMPORTANT: Field order should be completely independent of section order\n    // Always use the current field order from fieldOrderData, regardless of section position\n    console.log('🔍 DEBUG: Ensuring field order independence from section order');\n    \n    let leftColumn, rightColumn;\n    \n    if (leftSection === 'section1') {\n      // Company on left, Purchase Order on right\n      leftColumn = buildCompanyXML('left');\n      rightColumn = buildPurchaseOrderXML('right');\n      console.log('🔀 Using default order: Company left, Purchase Order right');\n    } else {\n      // Purchase Order on left, Company on right (sections swapped)\n      leftColumn = buildPurchaseOrderXML('left');\n      rightColumn = buildCompanyXML('right');\n      console.log('🔀 Using swapped order: Purchase Order left, Company right');\n    }\n    \n    // DEBUG: Verify that field order is preserved regardless of section position\n    console.log('🔍 DEBUG: Field order verification - Company fields should maintain custom order');\n    console.log('🔍 DEBUG: Final company XML will use fieldOrderData.companyFields order');\n    \n    return `\n      <table>\n        <tr>\n          ${leftColumn}\n          ${rightColumn}\n        </tr>\n      </table>\n    `;\n  };\n\n  // Build Vendor Information XML\n  const buildVendorXML = () => {\n    // Get field order for vendor; fallback to current array order if not provided\n    const vendorFields = fieldOrderData.vendorFields || [];\n    const vendorFieldOrder = data.fieldOrder?.vendor || vendorFields.map(f => f.id);\n    \n    const orderedVendorFields = vendorFieldOrder.map(fieldId => vendorFields.find(f => f.id === fieldId)).filter(Boolean);\n    \n    const rows = orderedVendorFields.map(f => {\n      let value = f.value || getVendorFieldValue(f.id, '');\n      let prefix = '';\n      if (f.id === 'vendor-phone') prefix = 'Phone: ';\n      if (f.id === 'vendor-fax') prefix = 'Fax: ';\n      return `${prefix}<span data-field=\"${f.id}\">${value}</span>`;\n    }).join('<br/>');\n    \n    return `\n      <td style=\"width: 50%;\" data-subsection=\"vendor\">\n        <table>\n          <tr>\n            <td class=\"section-header\">VENDOR</td>\n          </tr>\n          <tr>\n            <td class=\"section-content\">${rows}</td>\n          </tr>\n        </table>\n      </td>\n    `;\n  };\n \n  // Build Ship To Information XML\n  const buildShipToXML = () => {\n    // Get field order for ship-to; fallback to current array order if not provided\n    const shipToFields = fieldOrderData.shipToFields || [];\n    const shipToFieldOrder = data.fieldOrder?.shipTo || shipToFields.map(f => f.id);\n    \n    const orderedShipToFields = shipToFieldOrder.map(fieldId => shipToFields.find(f => f.id === fieldId)).filter(Boolean);\n    \n    const rows = orderedShipToFields.map(f => {\n      let value = f.value || getShipToFieldValue(f.id, '');\n      let prefix = '';\n      if (f.id === 'ship-to-phone') prefix = 'Phone: ';\n      if (f.id === 'ship-to-fax') prefix = 'Fax: ';\n      return `${prefix}<span data-field=\"${f.id}\">${value}</span>`;\n    }).join('<br/>');\n    \n    return `\n      <td style=\"width: 50%;\" data-subsection=\"ship-to\">\n        <table>\n          <tr>\n            <td class=\"section-header\">SHIP TO</td>\n          </tr>\n          <tr>\n            <td class=\"section-content\">${rows}</td>\n          </tr>\n        </table>\n      </td>\n    `;\n  };\n\n  // Build Vendor/Ship-To Section XML with dynamic ordering\n  const buildVendorShipToXML = () => {\n    // Get section order from data, default to [section3, section4] if not provided\n    const sectionOrder = data.sectionOrder?.sections3And4 || ['section3', 'section4'];\n    const leftSection = sectionOrder[0];\n    const rightSection = sectionOrder[1];\n    \n    console.log('🔀 Building vendor/ship-to section with order:', { leftSection, rightSection });\n    \n    let leftColumn, rightColumn;\n    \n    if (leftSection === 'section3') {\n      leftColumn = buildVendorXML();\n      rightColumn = buildShipToXML();\n    } else {\n      leftColumn = buildShipToXML();\n      rightColumn = buildVendorXML();\n    }\n    \n    return `\n      <table style=\"margin-top: 20px;\" data-section=\"vendor-ship-to\">\n        <tr>\n          ${leftColumn}\n          ${rightColumn}\n        </tr>\n      </table>\n    `;\n  };\n\n  // Build Line Items XML with dynamic column ordering\n  const buildLineItemsXML = () => {\n    // Get column order from data, default to standard order if not provided\n    const columnOrder = data.sectionOrder?.lineItemColumns || ['itemNumber', 'description', 'qty', 'rate', 'amount'];\n    \n    console.log('🔀 Building line items with column order:', columnOrder);\n    console.log('🔀 Line items data:', data.lineItems);\n    console.log('🔀 Column order from state:', data.sectionOrder?.lineItemColumns);\n    \n    // Column configuration mapping\n    const columnConfig = {\n      itemNumber: { label: 'Item#', colSpan: 3, field: 'itemNumber' },\n      description: { label: 'Description', colSpan: 12, field: 'description' },\n      qty: { label: 'Qty', colSpan: 2, field: 'qty' },\n      rate: { label: 'Rate', colSpan: 3, field: 'rate' },\n      amount: { label: 'Amount', colSpan: 3, field: 'amount' }\n    };\n    \n    // Build header row\n    const headerRow = columnOrder.map(columnId => {\n      const config = columnConfig[columnId];\n      return `<td class=\"item-header\" colSpan=\"${config.colSpan}\">${config.label}</td>`;\n    }).join('');\n    \n    // Build data rows using actual line item data\n    const lineItems = data.lineItems || [];\n    const dataRows = Array(5).fill(0).map((_, rowIndex) => {\n      const rowData = lineItems[rowIndex] || {};\n      const rowCells = columnOrder.map(columnId => {\n        const config = columnConfig[columnId];\n        const fieldValue = rowData[columnId] || '-';\n        return `<td colSpan=\"${config.colSpan}\">${fieldValue}</td>`;\n      }).join('');\n      \n      return `<tr data-row-id=\"line-item-${rowIndex}\" data-row-index=\"${rowIndex}\">${rowCells}</tr>`;\n    }).join('');\n    \n    return `\n      <table style=\"margin-top: 15px;\" data-section=\"line-items\">\n        <tr>\n          ${headerRow}\n        </tr>\n        ${dataRows}\n      </table>\n    `;\n  };\n\n  // Build Comments Section XML\n  const buildCommentsXML = () => {\n    const comments = getFieldValue('comments', '[Enter comments or special instructions...]');\n    return `\n      <td style=\"width: 50%;\" data-section=\"comments\">\n        <table>\n          <tr>\n            <td class=\"comments-header\">Comments or Special Instructions</td>\n          </tr>\n          <tr>\n            <td class=\"comments-content\">${comments}</td>\n          </tr>\n        </table>\n      </td>\n    `;\n  };\n\n  // Build Totals Section XML\n  const buildTotalsXML = () => {\n    const subtotal = getTotalsFieldValue('subtotal', '$0.00');\n    const tax = getTotalsFieldValue('tax', '$0.00');\n    const shipping = getTotalsFieldValue('shipping', '$0.00');\n    const other = getTotalsFieldValue('other', '$0.00');\n    const total = getTotalsFieldValue('total', '$0.00');\n    \n    return `\n      <td style=\"width: 50%;\" data-section=\"totals\">\n        <table>\n          <tr>\n            <td class=\"section-header\">Totals</td>\n          </tr>\n          <tr>\n            <td class=\"section-content\">\n              <div>SUBTOTAL: ${subtotal}</div>\n              <div>TAX: ${tax}</div>\n              <div>SHIPPING: ${shipping}</div>\n              <div>OTHER: ${other}</div>\n              <div class=\"total-final\">TOTAL: ${total}</div>\n            </td>\n          </tr>\n        </table>\n      </td>\n    `;\n  };\n\n  // Build Comments and Totals Section XML with dynamic ordering\n  const buildCommentsTotalsXML = () => {\n    // Get section order from data, default to [section8, section9] if not provided\n    const sectionOrder = data.sectionOrder?.sections8And9 || ['section8', 'section9'];\n    const leftSection = sectionOrder[0];\n    const rightSection = sectionOrder[1];\n    \n    console.log('🔀 Building comments/totals section with order:', { leftSection, rightSection });\n    \n    let leftColumn, rightColumn;\n    \n    if (leftSection === 'section8') {\n      leftColumn = buildCommentsXML();\n      rightColumn = buildTotalsXML();\n    } else {\n      leftColumn = buildTotalsXML();\n      rightColumn = buildCommentsXML();\n    }\n    \n    return `\n      <table style=\"margin-top: 15px;\" data-section=\"comments-totals\">\n        <tr>\n          ${leftColumn}\n          ${rightColumn}\n        </tr>\n      </table>\n    `;\n  };\n\n  // Helper function to get shipping details field values with dynamic ID support\n  const getShippingFieldValue = (fieldType, defaultValue = '') => {\n    const possibleSelectors = [\n      `.shipping-field-${fieldType} .editable-field`,\n      `.shipping-field[data-field=\"${fieldType}\"] .editable-field`,\n      `.shipping-${fieldType} .editable-field`,\n      `#shipping-${fieldType}`,\n      `[data-shipping-field=\"${fieldType}\"]`\n    ];\n    \n    // Try to get value from DOM or data object\n    if (data[fieldType]) {\n      return data[fieldType];\n    }\n    \n    // Try DOM selectors\n    for (const selector of possibleSelectors) {\n      const element = document.querySelector(selector);\n      if (element && element.textContent.trim()) {\n        return element.textContent.trim();\n      }\n    }\n    \n    return defaultValue;\n  };\n\n  // Helper function to get line item values with dynamic ID support\n  const getLineItemValue = (rowIndex, fieldType, defaultValue = '') => {\n    const possibleSelectors = [\n      `#line-item-${rowIndex}-${fieldType}`,\n      `.line-item-row[data-row=\"${rowIndex}\"] .${fieldType}-field`,\n      `.itemtable tbody tr:nth-child(${rowIndex + 1}) .${fieldType}-field .editable-field`,\n      `.itemtable tbody tr:nth-child(${rowIndex + 1}) td:nth-child(${getColumnIndex(fieldType)}) .editable-field`\n    ];\n    \n    // Try data object first\n    if (data.lineItems && data.lineItems[rowIndex] && data.lineItems[rowIndex][fieldType]) {\n      return data.lineItems[rowIndex][fieldType];\n    }\n    \n    // Try DOM selectors\n    for (const selector of possibleSelectors) {\n      const element = document.querySelector(selector);\n      if (element && element.textContent.trim()) {\n        return element.textContent.trim();\n      }\n    }\n    \n    return defaultValue;\n  };\n\n  // Helper function to get column index for line items\n  const getColumnIndex = (fieldType) => {\n    const columnMap = {\n      itemNumber: 2,\n      description: 3,\n      quantity: 4,\n      unitPrice: 5,\n      total: 6\n    };\n    return columnMap[fieldType] || 1;\n  };\n\n  // Helper function to get totals field values with dynamic ID support\n  const getTotalFieldValue = (fieldType, defaultValue = '') => {\n    const possibleSelectors = [\n      `#total-${fieldType}`,\n      `.total-${fieldType} .editable-field`,\n      `.total-row[data-field=\"${fieldType}\"] .editable-field`,\n      `.totals-section .${fieldType}-field .editable-field`\n    ];\n    \n    // Try data object first\n    if (data[fieldType]) {\n      return data[fieldType];\n    }\n    \n    // Try DOM selectors\n    for (const selector of possibleSelectors) {\n      const element = document.querySelector(selector);\n      if (element && element.textContent.trim()) {\n        return element.textContent.trim();\n      }\n    }\n    \n    return defaultValue;\n  };\n\n  // Helper function to get comments field value with dynamic ID support\n  const getCommentsValue = (defaultValue = '') => {\n    const possibleSelectors = [\n      '#comments-field',\n      '.comments-content .editable-field',\n      '.comments-section .editable-field',\n      '[data-field=\"comments\"]'\n    ];\n    \n    // Try data object first\n    if (data.comments) {\n      return data.comments;\n    }\n    \n    // Try DOM selectors\n    for (const selector of possibleSelectors) {\n      const element = document.querySelector(selector);\n      if (element && element.textContent.trim()) {\n        return element.textContent.trim();\n      }\n    }\n    \n    return defaultValue;\n  };\n\n  // Helper function to get contact info field value with dynamic ID support\n  const getContactInfoValue = (defaultValue = '') => {\n    const possibleSelectors = [\n      '#contact-info-field',\n      '.contact-section .editable-field',\n      '.contact-info .editable-field',\n      '[data-field=\"contactInfo\"]'\n    ];\n    \n    // Try data object first\n    if (data.contactInfo) {\n      return data.contactInfo;\n    }\n    \n    // Try DOM selectors\n    for (const selector of possibleSelectors) {\n      const element = document.querySelector(selector);\n      if (element && element.textContent.trim()) {\n        return element.textContent.trim();\n      }\n    }\n    \n    return defaultValue;\n  };\n\n  // Generate line items XML with dynamic ID support\n  const generateLineItemsXML = () => {\n    const maxRows = 5; // Standard number of line item rows\n    \n    // Generate rows (either from data or empty placeholder rows)\n    return Array(maxRows).fill(0).map((_, index) => {\n      // Try to get values using dynamic ID system\n      const itemNumber = getLineItemValue(index, 'itemNumber', '-');\n      const description = getLineItemValue(index, 'description', '-');\n      const quantity = getLineItemValue(index, 'quantity', '-');\n      const unitPrice = getLineItemValue(index, 'unitPrice', '-');\n      const total = getLineItemValue(index, 'total', '-');\n      \n      return `\n        <tr data-row-id=\"line-item-${index}\" data-row-index=\"${index}\">\n            <td class=\"item-cell\" align=\"left\" colspan=\"3\" data-field=\"itemNumber\" data-row=\"${index}\">${itemNumber}</td>\n            <td class=\"item-cell\" align=\"left\" colspan=\"12\" data-field=\"description\" data-row=\"${index}\">${description}</td>\n            <td class=\"item-cell\" align=\"center\" colspan=\"2\" data-field=\"quantity\" data-row=\"${index}\">${quantity}</td>\n            <td class=\"item-cell\" align=\"right\" colspan=\"3\" data-field=\"unitPrice\" data-row=\"${index}\">${unitPrice}</td>\n            <td class=\"item-cell\" align=\"right\" colspan=\"3\" data-field=\"total\" data-row=\"${index}\">${total}</td>\n        </tr>`;\n    }).join('');\n  };\n\n  // Generate the complete XML using the new template structure\n  const xml = `<?xml version=\"1.0\"?>\n<!DOCTYPE pdf PUBLIC \"-//big.faceless.org//report\" \"report-1.1.dtd\">\n<pdf>\n<head>\n    <meta name=\"title\" value=\"Purchase Order\"/>\n    <meta name=\"author\" value=\"Purchase Order Generator\"/>\n    <meta name=\"subject\" value=\"Purchase Order\"/>\n    <meta name=\"creator\" value=\"Purchase Order Generator\"/>\n    <meta name=\"producer\" value=\"Purchase Order Generator\"/>\n    <meta name=\"creationDate\" value=\"${new Date().toISOString()}\"/>\n    <meta name=\"modDate\" value=\"${new Date().toISOString()}\"/>\n    <link name=\"NotoSans\" type=\"font\" subtype=\"truetype\" src=\"\\${nsfont.NotoSans_Regular}\" src-bold=\"\\${nsfont.NotoSans_Bold}\" src-italic=\"\\${nsfont.NotoSans_Italic}\" src-bolditalic=\"\\${nsfont.NotoSans_BoldItalic}\" bytes=\"2\" />\n    <style>\n        * { font-family: NotoSans, sans-serif; font-size: 9pt; }\n        table { width: 100%; border-collapse: collapse; }\n        .header-company { font-size: 14pt; font-weight: bold; }\n        .header-title { font-size: 20pt; font-weight: bold; background-color: #333333; color: #ffffff; padding: 6px; border: 1px solid #000; }\n        .header-info { font-size: 10pt; }\n        .section-header { background-color: #333333; color: #ffffff; font-weight: bold; padding: 6px; border: 1px solid #000; }\n        .section-content { padding: 6px; border: 1px solid #000; vertical-align: top; }\n        .item-header { background-color: #333333; color: #ffffff; font-weight: bold; padding: 8px; border: 1px solid #000; }\n        .item-cell { padding: 6px; border: 1px solid #000; }\n        .total-label { font-weight: bold; padding: 4px; }\n        .total-amount { font-weight: bold; padding: 4px; background-color: #ffff99; }\n        .comments-header { background-color: #333333; color: #ffffff; font-weight: bold; padding: 6px; border: 1px solid #000; }\n        .comments-content { padding: 6px; border: 1px solid #000; min-height: 40px; }\n        .contact-info { font-size: 8pt; }\n    </style>\n</head>\n<body padding=\"0.5in\" size=\"Letter\">\n    \n    ${buildHeaderSectionXML()}\n    ${buildVendorShipToAndShippingDetailsXML()}\n\n\n    ${buildLineItemsXML()}\n\n\n    ${buildCommentsTotalsXML()}\n\n\n\n    <table style=\"margin-top: 20px;\" data-section=\"contact-signature\">\n        <tr>\n            <td class=\"contact-info\" style=\"width: 70%;\" data-field=\"contact-info\">\n                ${getContactInfoValue('For inquiries, please contact us')}\n            </td>\n            <td style=\"width: 30%; text-align: center;\" data-field=\"signature\">\n                <table style=\"width: 100%;\">\n                    <tr>\n                        <td style=\"border-top: 1px solid #000; padding-top: 10px;\">\n                            Authorized Signature\n                        </td>\n                    </tr>\n                </table>\n            </td>\n        </tr>\n    </table>\n</body>\n</pdf>`;\n\n  console.log('✅ DYNAMIC ID TEMPLATE: XML generated successfully with dynamic field support');\n  console.log('📄 XML preview (first 200 chars):', xml.substring(0, 200));\n  return xml;\n}\n\n// Export the template structure for reference with dynamic ID support\nexport const purchaseOrderTemplate = {\n  companyInfo: {\n    staticFields: ['company-name', 'company-address', 'company-city-state', 'company-phone', 'company-fax', 'company-website'],\n    dynamicPrefixes: ['company-field-', 'company-'],\n    dataAttribute: 'data-section=\"company-info\"'\n  },\n  purchaseOrder: {\n    staticFields: ['po-title', 'po-date', 'po-number'],\n    dynamicPrefixes: ['po-field-', 'po-'],\n    dataAttribute: 'data-section=\"purchase-order-info\"'\n  },\n  vendor: {\n    staticFields: ['vendor-company', 'vendor-contact', 'vendor-address', 'vendor-city-state', 'vendor-phone', 'vendor-fax'],\n    dynamicPrefixes: ['vendor-field-', 'vendor-'],\n    dataAttribute: 'data-subsection=\"vendor\"'\n  },\n  shipTo: {\n    staticFields: ['ship-to-name', 'ship-to-company', 'ship-to-address', 'ship-to-city-state', 'ship-to-phone', 'ship-to-fax'],\n    dynamicPrefixes: ['ship-to-field-', 'ship-to-'],\n    dataAttribute: 'data-subsection=\"ship-to\"'\n  },\n  shipping: {\n    staticFields: ['requisitioner', 'shipVia', 'fob', 'shippingTerms'],\n    dynamicPrefixes: ['shipping-field-', 'shipping-'],\n    dataAttribute: 'data-section=\"shipping-details\"'\n  },\n  lineItems: {\n    staticFields: ['itemNumber', 'description', 'quantity', 'unitPrice', 'total'],\n    dynamicPrefixes: ['line-item-', 'item-'],\n    dataAttribute: 'data-section=\"line-items\"',\n    maxRows: 5\n  },\n  totals: {\n    staticFields: ['subtotal', 'tax', 'shipping', 'other', 'total'],\n    dynamicPrefixes: ['total-', 'totals-'],\n    dataAttribute: 'data-subsection=\"totals\"'\n  },\n  comments: {\n    staticFields: ['comments'],\n    dynamicPrefixes: ['comments-field-', 'comment-'],\n    dataAttribute: 'data-subsection=\"comments\"'\n  },\n  contact: {\n    staticFields: ['contactInfo'],\n    dynamicPrefixes: ['contact-info-field-', 'contact-'],\n    dataAttribute: 'data-section=\"contact-signature\"'\n  }\n};\n\n// Export a simple function to get template structure\nexport function getTemplateStructure() {\n  return purchaseOrderTemplate;\n}\n\n// Dynamic ID Generation Utilities\nexport const dynamicIdUtils = {\n  // Generate a new dynamic ID with timestamp and random component\n  generateId: (prefix = 'field', section = 'general') => {\n    const timestamp = Date.now();\n    const random = Math.random().toString(36).substr(2, 9);\n    return `${section}-${prefix}-${timestamp}-${random}`;\n  },\n\n  // Generate multiple possible IDs for a field to try when looking up values\n  getPossibleIds: (staticId, section = 'unknown') => {\n    const baseName = staticId.replace(/^(company-|po-|vendor-|ship-to-)/, '');\n    return [\n      staticId, // Try static ID first\n      `${section}-field-${staticId}`,\n      `${section}-${baseName}`,\n      `${staticId}-${Date.now()}`,\n      `field-${baseName}`,\n      baseName\n    ];\n  },\n\n  // Validate if an ID follows our dynamic ID pattern\n  isValidDynamicId: (id) => {\n    const dynamicPattern = /^[a-z-]+-(field-)?[a-z-]+(-\\d+)?(-[a-z0-9]+)?$/;\n    return dynamicPattern.test(id);\n  },\n\n  // Extract the base field type from any ID (static or dynamic)\n  getFieldType: (id) => {\n    // Remove common prefixes and suffixes to get the core field type\n    return id\n      .replace(/^(company-|po-|vendor-|ship-to-|shipping-|total-|line-item-|comments-|contact-)/, '')\n      .replace(/-(field-)?(\\d+)?(-[a-z0-9]+)?$/, '')\n      .replace(/^(field-)?/, '');\n  },\n\n  // Get section from ID\n  getSection: (id) => {\n    if (id.startsWith('company-')) return 'company';\n    if (id.startsWith('po-')) return 'purchase-order';\n    if (id.startsWith('vendor-')) return 'vendor';\n    if (id.startsWith('ship-to-')) return 'ship-to';\n    if (id.startsWith('shipping-')) return 'shipping';\n    if (id.startsWith('line-item-')) return 'line-items';\n    if (id.startsWith('total-')) return 'totals';\n    if (id.startsWith('comments-')) return 'comments';\n    if (id.startsWith('contact-')) return 'contact';\n    return 'unknown';\n  }\n};\n\n// Field Mapping Utilities\nexport const fieldMappingUtils = {\n  // Map all known static field IDs to their readable names\n  staticFieldNames: {\n    // Company fields\n    'company-name': 'Company Name',\n    'company-address': 'Street Address',\n    'company-city-state': 'City, State, ZIP',\n    'company-phone': 'Phone Number',\n    'company-fax': 'Fax Number',\n    'company-website': 'Website',\n    \n    // Purchase Order fields\n    'po-title': 'Purchase Order Title',\n    'po-date': 'Date',\n    'po-number': 'PO Number',\n    \n    // Vendor fields\n    'vendor-company': 'Vendor Company',\n    'vendor-contact': 'Vendor Contact',\n    'vendor-address': 'Vendor Address',\n    'vendor-city-state': 'Vendor City/State',\n    'vendor-phone': 'Vendor Phone',\n    'vendor-fax': 'Vendor Fax',\n    \n    // Ship To fields\n    'ship-to-name': 'Ship To Name',\n    'ship-to-company': 'Ship To Company',\n    'ship-to-address': 'Ship To Address',\n    'ship-to-city-state': 'Ship To City/State',\n    'ship-to-phone': 'Ship To Phone',\n    'ship-to-fax': 'Ship To Fax',\n    \n    // Shipping fields\n    'requisitioner': 'Requisitioner',\n    'shipVia': 'Ship Via',\n    'fob': 'F.O.B.',\n    'shippingTerms': 'Shipping Terms',\n    \n    // Line item fields\n    'itemNumber': 'Item Number',\n    'description': 'Description',\n    'quantity': 'Quantity',\n    'unitPrice': 'Unit Price',\n    'total': 'Total',\n    \n    // Totals fields\n    'subtotal': 'Subtotal',\n    'tax': 'Tax',\n    'shipping': 'Shipping',\n    'other': 'Other',\n    \n    // Other fields\n    'comments': 'Comments',\n    'contactInfo': 'Contact Information'\n  },\n\n  // Get human-readable name for any field ID\n  getFieldName: (id) => {\n    const staticName = fieldMappingUtils.staticFieldNames[id];\n    if (staticName) return staticName;\n    \n    // For dynamic IDs, try to extract the base field type\n    const fieldType = dynamicIdUtils.getFieldType(id);\n    const staticFieldName = fieldMappingUtils.staticFieldNames[fieldType];\n    if (staticFieldName) return staticFieldName;\n    \n    // Fallback: humanize the ID\n    return id.replace(/[-_]/g, ' ').replace(/\\b\\w/g, l => l.toUpperCase());\n  },\n\n  // Get all field IDs for a section\n  getFieldsForSection: (section) => {\n    const template = purchaseOrderTemplate[section];\n    return template ? template.staticFields : [];\n  }\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}