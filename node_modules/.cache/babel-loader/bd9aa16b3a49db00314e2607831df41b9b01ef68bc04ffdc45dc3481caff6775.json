{"ast":null,"code":"// Purchase Order XML Template for NetSuite Integration\n// This template generates XML compatible with Big Faceless Report Generator (BFR)\n\nimport { processFormData } from './FormDataMapper';\n\n// Function to generate XML from React form data\nexport function generatePurchaseOrderXML(formData, options = {}) {\n  // DEBUG: Log that we're using the DYNAMIC ID template\n  console.log('🚀 DYNAMIC ID TEMPLATE VERSION LOADED - generatePurchaseOrderXML called');\n  console.log('📅 Template updated at:', new Date().toISOString());\n  console.log('📊 Raw form data received:', formData);\n\n  // Process and validate form data using the FormDataMapper\n  let processedData;\n  try {\n    processedData = processFormData(formData, {\n      calculateTotals: options.calculateTotals !== false,\n      validate: options.validate !== false,\n      formatForXML: true,\n      throwOnValidationError: options.throwOnValidationError || false\n    });\n    console.log('📊 Processed form data:', processedData);\n  } catch (error) {\n    console.error('❌ Form data processing failed:', error);\n    if (options.throwOnValidationError) {\n      throw error;\n    }\n    // Fallback to using raw data\n    processedData = formData || {};\n  }\n\n  // Use processed data for XML generation, fallback to original data\n  // BUT preserve the original field order from formData for dynamic ordering\n  const data = processedData || formData || {};\n\n  // IMPORTANT: For field ordering, use the original formData to preserve drag-and-drop order\n  const fieldOrderData = {\n    ...data,\n    companyFields: Array.isArray(formData.companyFields) ? formData.companyFields : data.companyFields || [],\n    purchaseOrderFields: Array.isArray(formData.purchaseOrderFields) ? formData.purchaseOrderFields : data.purchaseOrderFields || [],\n    vendorFields: Array.isArray(formData.vendorFields) ? formData.vendorFields : data.vendorFields || [],\n    shipToFields: Array.isArray(formData.shipToFields) ? formData.shipToFields : data.shipToFields || []\n  };\n\n  // Helper function to safely get field values with fallbacks (for simple fields)\n  const getFieldValue = (fieldName, defaultValue = '') => {\n    return data[fieldName] || defaultValue;\n  };\n\n  // Enhanced helper function to get field values by dynamic ID or static fallback\n  const getDynamicFieldValue = (fieldArray, possibleIds, defaultValue = '') => {\n    if (!Array.isArray(fieldArray)) {\n      console.warn(`⚠️ Field array is not valid for possibleIds:`, possibleIds);\n      return defaultValue;\n    }\n\n    // Try each possible ID in order of preference\n    for (const fieldId of possibleIds) {\n      const field = fieldArray.find(f => f.id === fieldId);\n      if (field && field.value) {\n        return field.value;\n      }\n    }\n    return defaultValue;\n  };\n\n  // Helper function to get company field values with dynamic ID support\n  const getCompanyFieldValue = (staticId, defaultValue = '') => {\n    if (Array.isArray(data.companyFields)) {\n      // First try the static ID, then try dynamic IDs that might have been generated\n      const possibleIds = [staticId, `company-field-${staticId}`, `${staticId}-${Date.now()}`, ...data.companyFields.filter(f => f.id.includes(staticId.replace('company-', ''))).map(f => f.id)];\n      return getDynamicFieldValue(data.companyFields, possibleIds, defaultValue);\n    }\n    console.warn(`⚠️ companyFields is not an array for staticId: ${staticId}`);\n    return defaultValue;\n  };\n\n  // Helper function to get purchase order field values with dynamic ID support\n  const getPOFieldValue = (staticId, defaultValue = '') => {\n    if (Array.isArray(data.purchaseOrderFields)) {\n      const possibleIds = [staticId, `po-field-${staticId}`, `${staticId}-${Date.now()}`, ...data.purchaseOrderFields.filter(f => f.id.includes(staticId.replace('po-', ''))).map(f => f.id)];\n      return getDynamicFieldValue(data.purchaseOrderFields, possibleIds, defaultValue);\n    }\n    return defaultValue;\n  };\n\n  // Helper function to get vendor field values with dynamic ID support\n  const getVendorFieldValue = (staticId, defaultValue = '') => {\n    if (Array.isArray(data.vendorFields)) {\n      const possibleIds = [staticId, `vendor-field-${staticId}`, `${staticId}-${Date.now()}`, ...data.vendorFields.filter(f => f.id.includes(staticId.replace('vendor-', ''))).map(f => f.id)];\n      return getDynamicFieldValue(data.vendorFields, possibleIds, defaultValue);\n    }\n    return defaultValue;\n  };\n\n  // Helper function to get ship-to field values with dynamic ID support\n  const getShipToFieldValue = (staticId, defaultValue = '') => {\n    if (Array.isArray(data.shipToFields)) {\n      const possibleIds = [staticId, `ship-to-field-${staticId}`, `${staticId}-${Date.now()}`, ...data.shipToFields.filter(f => f.id.includes(staticId.replace('ship-to-', ''))).map(f => f.id)];\n      return gehaltenDynamicFieldValue(data.shipToFields, possibleIds, defaultValue);\n    }\n    return defaultValue;\n  };\n\n  // Helper function to get totals field values with dynamic ID support\n  const getTotalsFieldValue = (staticId, defaultValue = '') => {\n    if (Array.isArray(data.totalsFields)) {\n      const possibleIds = [staticId, `totals-field-${staticId}`, `${staticId}-${Date.now()}`, ...data.totalsFields.filter(f => f.id.includes(staticId)).map(f => f.id)];\n      return getDynamicFieldValue(data.totalsFields, possibleIds, defaultValue);\n    }\n    return defaultValue;\n  };\n\n  // ============================================================================\n  // MODULAR XML BUILDER FUNCTIONS\n  // ============================================================================\n\n  // Build Company Information XML with dynamic field ordering\n  const buildCompanyXML = () => {\n    // Ensure companyFields is an array to prevent errors\n    const companyFields = Array.isArray(fieldOrderData.companyFields) ? fieldOrderData.companyFields : [];\n    console.log('🔀 Building company XML with dynamic field ordering');\n    console.log('🔀 Company fields received from data:', companyFields.length);\n    console.log('🔀 Company fields IDs in current order:', companyFields.map(f => f.id));\n    console.log('🔀 Company fields labels in current order:', companyFields.map(f => f.label));\n\n    // Build rows dynamically based on current field order\n    const fieldRows = companyFields.map((field, index) => {\n      // Use getCompanyFieldValue to ensure we get the correct value for the field ID\n      const fieldValue = getCompanyFieldValue(field.id, field.value || field.placeholder || '');\n      const isHeader = field.id === 'company-name' || field.id.includes('company-name');\n      console.log(`🔀 Processing field ${index}:`, {\n        id: field.id,\n        label: field.label,\n        value: fieldValue,\n        isHeader\n      });\n      if (isHeader) {\n        const row = `<tr><td class=\"header-company\" style=\"text-align: left;\" data-field=\"${field.id}\">${fieldValue}</td></tr>`;\n        console.log(`🔀 Generated header row for ${field.id}:`, row);\n        return row;\n      } else {\n        // Handle special formatting for phone, fax, website\n        let displayText = fieldValue;\n        if (field.id.includes('phone')) displayText = `Phone: ${fieldValue}`;\n        if (field.id.includes('fax')) displayText = `Fax: ${fieldValue}`;\n        if (field.id.includes('website')) displayText = `Website: ${fieldValue}`;\n        const row = `<tr><td style=\"text-align: left;\" data-field=\"${field.id}\">${displayText}</td></tr>`;\n        console.log(`🔀 Generated regular row for ${field.id}:`, row);\n        return row;\n      }\n    }).join('');\n\n    // Fallback if no fields are provided\n    if (!fieldRows) {\n      console.warn('⚠️ No company fields provided, generating default rows');\n      const defaultFields = [{\n        id: 'company-name',\n        value: '[Company Name]'\n      }, {\n        id: 'company-address',\n        value: '[Street Address]'\n      }, {\n        id: 'company-city-state',\n        value: '[City, ST ZIP]'\n      }, {\n        id: 'company-phone',\n        value: 'Phone: (000) 000-0000'\n      }, {\n        id: 'company-fax',\n        value: 'Fax: (000) 000-0000'\n      }, {\n        id: 'company-website',\n        value: 'Website: [Website]'\n      }];\n      const defaultRows = defaultFields.map((field, index) => {\n        const isHeader = field.id === 'company-name';\n        const row = `<tr><td ${isHeader ? 'class=\"header-company\"' : ''} style=\"text-align: left;\" data-field=\"${field.id}\">${field.value}</td></tr>`;\n        console.log(`🔀 Generated default row for ${field.id}:`, row);\n        return row;\n      }).join('');\n      console.log('🔀 Default company fieldRows:', defaultRows);\n      return `\n        <td style=\"width: 65%; padding-right: 20px;\" data-section=\"company-info\">\n          <table>\n            ${defaultRows}\n          </table>\n        </td>\n      `;\n    }\n    console.log('🔀 Final generated fieldRows:', fieldRows);\n    const result = `\n      <td style=\"width: 65%; padding-right: 20px;\" data-section=\"company-info\">\n        <table>\n          ${fieldRows}\n        </table>\n      </td>\n    `;\n    console.log('🔀 Final company XML result:', result);\n    return result;\n  };\n\n  // Build Purchase Order Information XML\n  const buildPurchaseOrderXML = () => {\n    return `\n      <td style=\"width: 35%; padding-left: 20px;\" align=\"right\" data-section=\"purchase-order-info\">\n        <table>\n          <tr>\n            <td class=\"header-title\" style=\"text-align: right;\" data-field=\"po-title\">${getPOFieldValue('po-title', 'PURCHASE ORDER')}</td>\n          </tr>\n          <tr>\n            <td style=\"text-align: right;\">\n              <table style=\"width: 100%;\">\n                <tr>\n                  <td class=\"header-info\" style=\"width: 30%; text-align: left;\"><b>DATE</b></td>\n                  <td class=\"header-info\" style=\"width: 70%; text-align: left;\" data-field=\"po-date\">${getPOFieldValue('po-date', 'MM/DD/YYYY')}</td>\n                </tr>\n                <tr>\n                  <td class=\"header-info\" style=\"width: 30%; text-align: left;\"><b>PO #</b></td>\n                  <td class=\"header-info\" style=\"width: 70%; text-align: left;\" data-field=\"po-number\">${getPOFieldValue('po-number', '[PO Number]')}</td>\n                </tr>\n              </table>\n            </td>\n          </tr>\n        </table>\n      </td>\n    `;\n  };\n\n  // Build Header Section XML (Company + Purchase Order) with dynamic ordering\n  const buildHeaderSectionXML = () => {\n    var _data$sectionOrder, _data$sectionOrder2;\n    // Get section order from data, default to ['section1', 'section2'] if not provided\n    const sectionOrder = Array.isArray((_data$sectionOrder = data.sectionOrder) === null || _data$sectionOrder === void 0 ? void 0 : _data$sectionOrder.sections1And2) ? data.sectionOrder.sections1And2 : ['section1', 'section2'];\n    const leftSection = sectionOrder[0];\n    const rightSection = sectionOrder[1];\n    console.log('🔀 Building header section with order:', {\n      leftSection,\n      rightSection\n    });\n    console.log('🔀 Full sectionOrder data:', data.sectionOrder);\n    console.log('🔀 sections1And2 array:', (_data$sectionOrder2 = data.sectionOrder) === null || _data$sectionOrder2 === void 0 ? void 0 : _data$sectionOrder2.sections1And2);\n    let leftColumn, rightColumn;\n    if (leftSection === 'section1') {\n      leftColumn = buildCompanyXML();\n      rightColumn = buildPurchaseOrderXML();\n      console.log('🔀 Using default order: Company left, Purchase Order right');\n    } else {\n      leftColumn = buildPurchaseOrderXML();\n      rightColumn = buildCompanyXML();\n      console.log('🔀 Using swapped order: Purchase Order left, Company right');\n    }\n    return `\n      <table>\n        <tr>\n          ${leftColumn}\n          ${rightColumn}\n        </tr>\n      </table>\n    `;\n  };\n\n  // Build Vendor Information XML\n  const buildVendorXML = () => {\n    return `\n      <td style=\"width: 50%;\" data-subsection=\"vendor\">\n        <table>\n          <tr>\n            <td class=\"section-header\">VENDOR</td>\n          </tr>\n          <tr>\n            <td class=\"section-content\">\n              <span data-field=\"vendor-company\">${getVendorFieldValue('vendor-company', '[Company Name]')}</span><br/>\n              <span data-field=\"vendor-contact\">${getVendorFieldValue('vendor-contact', '[Contact Person]')}</span><br/>\n              <span data-field=\"vendor-address\">${getVendorFieldValue('vendor-address', '[Street Address]')}</span><br/>\n              <span data-field=\"vendor-city-state\">${getVendorFieldValue('vendor-city-state', '[City, ST ZIP]')}</span><br/>\n              Phone: <span data-field=\"vendor-phone\">${getVendorFieldValue('vendor-phone', '(000) 000-0000')}</span><br/>\n              Fax: <span data-field=\"vendor-fax\">${getVendorFieldValue('vendor-fax', '(000) 000-0000')}</span>\n            </td>\n          </tr>\n        </table>\n      </td>\n    `;\n  };\n\n  // Build Ship To Information XML\n  const buildShipToXML = () => {\n    return `\n      <td style=\"width: 50%;\" data-subsection=\"ship-to\">\n        <table>\n          <tr>\n            <td class=\"section-header\">SHIP TO</td>\n          </tr>\n          <tr>\n            <td class=\"section-content\">\n              <span data-field=\"ship-to-name\">${getShipToFieldValue('ship-to-name', '[Contact Name]')}</span><br/>\n              <span data-field=\"ship-to-company\">${getShipToFieldValue('ship-to-company', '[Company Name]')}</span><br/>\n              <span data-field=\"ship-to-address\">${getShipToFieldValue('ship-to-address', '[Street Address]')}</span><br/>\n              <span data-field=\"ship-to-city-state\">${getShipToFieldValue('ship-to-city-state', '[City, ST ZIP]')}</span><br/>\n              Phone: <span data-field=\"ship-to-phone\">${getShipToFieldValue('ship-to-phone', '(000) 000-0000')}</span><br/>\n              Fax: <span data-field=\"ship-to-fax\">${getShipToFieldValue('ship-to-fax', '(000) 000-0000')}</span>\n            </td>\n          </tr>\n        </table>\n      </td>\n    `;\n  };\n\n  // Build Vendor-ShipTo Section XML with dynamic ordering\n  const buildVendorShipToSectionXML = () => {\n    var _data$sectionOrder3;\n    const sectionOrder = Array.isArray((_data$sectionOrder3 = data.sectionOrder) === null || _data$sectionOrder3 === void 0 ? void 0 : _data$sectionOrder3.sections3And4) ? data.sectionOrder.sections3And4 : ['section3', 'section4'];\n    const leftSection = sectionOrder[0];\n    const rightSection = sectionOrder[1];\n    console.log('🔀 Building vendor-shipTo section with order:', {\n      leftSection,\n      rightSection\n    });\n    let leftColumn, rightColumn;\n    if (leftSection === 'section3') {\n      leftColumn = buildVendorXML();\n      rightColumn = buildShipToXML();\n      console.log('🔀 Using default order: Vendor left, Ship To right');\n    } else {\n      leftColumn = buildShipToXML();\n      rightColumn = buildVendorXML();\n      console.log('🔀 Using swapped order: Ship To left, Vendor right');\n    }\n    return `\n      <table style=\"margin-top: 20px;\" data-section=\"vendor-ship-to\">\n        <tr>\n          ${leftColumn}\n          ${rightColumn}\n        </tr>\n      </table>\n    `;\n  };\n\n  // Build Shipping Details XML\n  const buildShippingDetailsXML = () => {\n    return `\n      <table style=\"margin-top: 15px;\" data-section=\"shipping-details\">\n        <tr>\n          <td class=\"section-header\" style=\"width: 25%;\">REQUISITIONER</td>\n          <td class=\"section-header\" style=\"width: 25%;\">SHIP VIA</td>\n          <td class=\"section-header\" style=\"width: 25%;\">F.O.B.</td>\n          <td class=\"section-header\" style=\"width: 25%;\">SHIPPING TERMS</td>\n        </tr>\n        <tr>\n          <td class=\"section-content\" data-field=\"requisitioner\">${getShippingFieldValue('requisitioner', '[Requisitioner]')}</td>\n          <td class=\"section-content\" data-field=\"shipVia\">${getShippingFieldValue('shipVia', '[Ship Via]')}</td>\n          <td class=\"section-content\" data-field=\"fob\">${getShippingFieldValue('fob', '[FOB]')}</td>\n          <td class=\"section-content\" data-field=\"shippingTerms\">${getShippingFieldValue('shippingTerms', '[Shipping Terms]')}</td>\n        </tr>\n      </table>\n    `;\n  };\n\n  // Build Vendor-ShipTo and Shipping Details sections with vertical swapping\n  const buildVendorShipToAndShippingDetailsXML = () => {\n    var _data$sectionOrder4;\n    const sectionOrder = Array.isArray((_data$sectionOrder4 = data.sectionOrder) === null || _data$sectionOrder4 === void 0 ? void 0 : _data$sectionOrder4.sections3And4And5And6) ? data.sectionOrder.sections3And4And5And6 : ['sections3And4', 'sections5And6'];\n    const topSection = sectionOrder[0];\n    const bottomSection = sectionOrder[1];\n    console.log('🔀 Building vendor-shipTo + shipping details with order:', {\n      topSection,\n      bottomSection\n    });\n    let topContent, bottomContent;\n    if (topSection === 'sections3And4') {\n      topContent = buildVendorShipToSectionXML();\n      bottomContent = buildShippingDetailsXML();\n      console.log('🔀 Using default order: Vendor-ShipTo top, Shipping Details bottom');\n    } else {\n      topContent = buildShippingDetailsXML();\n      bottomContent = buildVendorShipToSectionXML();\n      console.log('🔀 Using swapped order: Shipping Details top, Vendor-ShipTo bottom');\n    }\n    return `\n      ${topContent}\n      ${bottomContent}\n    `;\n  };\n\n  // Build Line Items XML with dynamic column ordering\n  const buildLineItemsXML = () => {\n    var _data$sectionOrder5;\n    const columnOrder = Array.isArray((_data$sectionOrder5 = data.sectionOrder) === null || _data$sectionOrder5 === void 0 ? void 0 : _data$sectionOrder5.lineItemColumns) ? data.sectionOrder.lineItemColumns : ['itemNumber', 'description', 'qty', 'rate', 'amount'];\n    console.log('🔀 Building line items with column order:', columnOrder);\n    const columnConfig = {\n      itemNumber: {\n        label: 'Item#',\n        colSpan: 3,\n        field: 'itemNumber'\n      },\n      description: {\n        label: 'Description',\n        colSpan: 12,\n        field: 'description'\n      },\n      qty: {\n        label: 'Qty',\n        colSpan: 2,\n        field: 'qty'\n      },\n      rate: {\n        label: 'Rate',\n        colSpan: 3,\n        field: 'rate'\n      },\n      amount: {\n        label: 'Amount',\n        colSpan: 3,\n        field: 'amount'\n      }\n    };\n    const headerRow = columnOrder.map(columnId => {\n      const config = columnConfig[columnId];\n      return `<td class=\"item-header\" colSpan=\"${config.colSpan}\">${config.label}</td>`;\n    }).join('');\n    const lineItems = Array.isArray(data.lineItems) ? data.lineItems : [];\n    const dataRows = Array(5).fill(0).map((_, rowIndex) => {\n      const rowData = lineItems[rowIndex] || {};\n      const rowCells = columnOrder.map(columnId => {\n        const config = columnConfig[columnId];\n        const fieldValue = rowData[columnId] || '-';\n        return `<td colSpan=\"${config.colSpan}\">${fieldValue}</td>`;\n      }).join('');\n      return `<tr data-row-id=\"line-item-${rowIndex}\" data-row-index=\"${rowIndex}\">${rowCells}</tr>`;\n    }).join('');\n    return `\n      <table style=\"margin-top: 15px;\" data-section=\"line-items\">\n        <tr>\n          ${headerRow}\n        </tr>\n        ${dataRows}\n      </table>\n    `;\n  };\n\n  // Build Comments Section XML\n  const buildCommentsXML = () => {\n    const comments = getFieldValue('comments', '[Enter comments or special instructions...]');\n    return `\n      <td style=\"width: 50%;\" data-section=\"comments\">\n        <table>\n          <tr>\n            <td class=\"comments-header\">Comments or Special Instructions</td>\n          </tr>\n          <tr>\n            <td class=\"comments-content\">${comments}</td>\n          </tr>\n        </table>\n      </td>\n    `;\n  };\n\n  // Build Totals Section XML\n  const buildTotalsXML = () => {\n    const subtotal = getTotalsFieldValue('subtotal', '$0.00');\n    const tax = getTotalsFieldValue('tax', '$0.00');\n    const shipping = getTotalsFieldValue('shipping', '$0.00');\n    const other = getTotalsFieldValue('other', '$0.00');\n    const total = getTotalsFieldValue('total', '$0.00');\n    return `\n      <td style=\"width: 50%;\" data-section=\"totals\">\n        <table>\n          <tr>\n            <td class=\"section-header\">Totals</td>\n          </tr>\n          <tr>\n            <td class=\"section-content\">\n              <div>SUBTOTAL: ${subtotal}</div>\n              <div>TAX: ${tax}</div>\n              <div>SHIPPING: ${shipping}</div>\n              <div>OTHER: ${other}</div>\n              <div class=\"total-final\">TOTAL: ${total}</div>\n            </td>\n          </tr>\n        </table>\n      </td>\n    `;\n  };\n\n  // Build Comments and Totals Section XML with dynamic ordering\n  const buildCommentsTotalsXML = () => {\n    var _data$sectionOrder6;\n    const sectionOrder = Array.isArray((_data$sectionOrder6 = data.sectionOrder) === null || _data$sectionOrder6 === void 0 ? void 0 : _data$sectionOrder6.sections8And9) ? data.sectionOrder.sections8And9 : ['section8', 'section9'];\n    const leftSection = sectionOrder[0];\n    const rightSection = sectionOrder[1];\n    console.log('🔀 Building comments/totals section with order:', {\n      leftSection,\n      rightSection\n    });\n    let leftColumn, rightColumn;\n    if (leftSection === 'section8') {\n      leftColumn = buildCommentsXML();\n      rightColumn = buildTotalsXML();\n    } else {\n      leftColumn = buildTotalsXML();\n      rightColumn = buildCommentsXML();\n    }\n    return `\n      <table style=\"margin-top: 15px;\" data-section=\"comments-totals\">\n        <tr>\n          ${leftColumn}\n          ${rightColumn}\n        </tr>\n      </table>\n    `;\n  };\n\n  // Helper function to get shipping details field values with dynamic ID support\n  const getShippingFieldValue = (fieldType, defaultValue = '') => {\n    const possibleSelectors = [`.shipping-field-${fieldType} .editable-field`, `.shipping-field[data-field=\"${fieldType}\"] .editable-field`, `.shipping-${fieldType} .editable-field`, `#shipping-${fieldType}`, `[data-shipping-field=\"${fieldType}\"]`];\n    if (data[fieldType]) {\n      return data[fieldType];\n    }\n    for (const selector of possibleSelectors) {\n      const element = document.querySelector(selector);\n      if (element && element.textContent.trim()) {\n        return element.textContent.trim();\n      }\n    }\n    return defaultValue;\n  };\n\n  // Helper function to get line item values with dynamic ID support\n  const getLineItemValue = (rowIndex, fieldType, defaultValue = '') => {\n    const possibleSelectors = [`#line-item-${rowIndex}-${fieldType}`, `.line-item-row[data-row=\"${rowIndex}\"] .${fieldType}-field`, `.itemtable tbody tr:nth-child(${rowIndex + 1}) .${fieldType}-field .editable-field`, `.itemtable tbody tr:nth-child(${rowIndex + 1}) td:nth-child(${getColumnIndex(fieldType)}) .editable-field`];\n    if (data.lineItems && data.lineItems[rowIndex] && data.lineItems[rowIndex][fieldType]) {\n      return data.lineItems[rowIndex][fieldType];\n    }\n    for (const selector of possibleSelectors) {\n      const element = document.querySelector(selector);\n      if (element && element.textContent.trim()) {\n        return element.textContent.trim();\n      }\n    }\n    return defaultValue;\n  };\n\n  // Helper function to get column index for line items\n  const getColumnIndex = fieldType => {\n    const columnMap = {\n      itemNumber: 2,\n      description: 3,\n      quantity: 4,\n      unitPrice: 5,\n      total: 6\n    };\n    return columnMap[fieldType] || 1;\n  };\n\n  // Helper function to get totals field values with dynamic ID support\n  const getTotalFieldValue = (fieldType, defaultValue = '') => {\n    const possibleSelectors = [`#total-${fieldType}`, `.total-${fieldType} .editable-field`, `.total-row[data-field=\"${fieldType}\"] .editable-field`, `.totals-section .${fieldType}-field .editable-field`];\n    if (data[fieldType]) {\n      return data[fieldType];\n    }\n    for (const selector of possibleSelectors) {\n      const element = document.querySelector(selector);\n      if (element && element.textContent.trim()) {\n        return element.textContent.trim();\n      }\n    }\n    return defaultValue;\n  };\n\n  // Helper function to get comments field value with dynamic ID support\n  const getCommentsValue = (defaultValue = '') => {\n    const possibleSelectors = ['#comments-field', '.comments-content .editable-field', '.comments-section .editable-field', '[data-field=\"comments\"]'];\n    if (data.comments) {\n      return data.comments;\n    }\n    for (const selector of possibleSelectors) {\n      const element = document.querySelector(selector);\n      if (element && element.textContent.trim()) {\n        return element.textContent.trim();\n      }\n    }\n    return defaultValue;\n  };\n\n  // Helper function to get contact info field value with dynamic ID support\n  const getContactInfoValue = (defaultValue = '') => {\n    const possibleSelectors = ['#contact-info-field', '.contact-section .editable-field', '.contact-info .editable-field', '[data-field=\"contactInfo\"]'];\n    if (data.contactInfo) {\n      return data.contactInfo;\n    }\n    for (const selector of possibleSelectors) {\n      const element = document.querySelector(selector);\n      if (element && element.textContent.trim()) {\n        return element.textContent.trim();\n      }\n    }\n    return defaultValue;\n  };\n\n  // Generate line items XML with dynamic ID support\n  const generateLineItemsXML = () => {\n    const maxRows = 5;\n    return Array(maxRows).fill(0).map((_, index) => {\n      const itemNumber = getLineItemValue(index, 'itemNumber', '-');\n      const description = getLineItemValue(index, 'description', '-');\n      const quantity = getLineItemValue(index, 'quantity', '-');\n      const unitPrice = getLineItemValue(index, 'unitPrice', '-');\n      const total = getLineItemValue(index, 'total', '-');\n      return `\n        <tr data-row-id=\"line-item-${index}\" data-row-index=\"${index}\">\n            <td class=\"item-cell\" align=\"left\" colspan=\"3\" data-field=\"itemNumber\" data-row=\"${index}\">${itemNumber}</td>\n            <td class=\"item-cell\" align=\"left\" colspan=\"12\" data-field=\"description\" data-row=\"${index}\">${description}</td>\n            <td class=\"item-cell\" align=\"center\" colspan=\"2\" data-field=\"quantity\" data-row=\"${index}\">${quantity}</td>\n            <td class=\"item-cell\" align=\"right\" colspan=\"3\" data-field=\"unitPrice\" data-row=\"${index}\">${unitPrice}</td>\n            <td class=\"item-cell\" align=\"right\" colspan=\"3\" data-field=\"total\" data-row=\"${index}\">${total}</td>\n        </tr>`;\n    }).join('');\n  };\n\n  // Generate the complete XML\n  const xml = `<?xml version=\"1.0\"?>\n<!DOCTYPE pdf PUBLIC \"-//big.faceless.org//report\" \"report-1.1.dtd\">\n<pdf>\n<head>\n    <meta name=\"title\" value=\"Purchase Order\"/>\n    <meta name=\"author\" value=\"Purchase Order Generator\"/>\n    <meta name=\"subject\" value=\"Purchase Order\"/>\n    <meta name=\"creator\" value=\"Purchase Order Generator\"/>\n    <meta name=\"producer\" value=\"Purchase Order Generator\"/>\n    <meta name=\"creationDate\" value=\"${new Date().toISOString()}\"/>\n    <meta name=\"modDate\" value=\"${new Date().toISOString()}\"/>\n    <link name=\"NotoSans\" type=\"font\" subtype=\"truetype\" src=\"\\${nsfont.NotoSans_Regular}\" src-bold=\"\\${nsfont.NotoSans_Bold}\" src-italic=\"\\${nsfont.NotoSans_Italic}\" src-bolditalic=\"\\${nsfont.NotoSans_BoldItalic}\" bytes=\"2\" />\n    <style>\n        * { font-family: NotoSans, sans-serif; font-size: 9pt; }\n        table { width: 100%; border-collapse: collapse; }\n        .header-company { font-size: 14pt; font-weight: bold; }\n        .header-title { font-size: 20pt; font-weight: bold; background-color: #333333; color: #ffffff; padding: 6px; border: 1px solid #000; }\n        .header-info { font-size: 10pt; }\n        .section-header { background-color: #333333; color: #ffffff; font-weight: bold; padding: 6px; border: 1px solid #000; }\n        .section-content { padding: 6px; border: 1px solid #000; vertical-align: top; }\n        .item-header { background-color: #333333; color: #ffffff; font-weight: bold; padding: 8px; border: 1px solid #000; }\n        .item-cell { padding: 6px; border: 1px solid #000; }\n        .total-label { font-weight: bold; padding: 4px; }\n        .total-amount { font-weight: bold; padding: 4px; background-color: #ffff99; }\n        .comments-header { background-color: #333333; color: #ffffff; font-weight: bold; padding: 6px; border: 1px solid #000; }\n        .comments-content { padding: 6px; border: 1px solid #000; min-height: 40px; }\n        .contact-info { font-size: 8pt; }\n    </style>\n</head>\n<body padding=\"0.5in\" size=\"Letter\">\n    \n    ${buildHeaderSectionXML()}\n    ${buildVendorShipToAndShippingDetailsXML()}\n    ${buildLineItemsXML()}\n    ${buildCommentsTotalsXML()}\n    \n    <table style=\"margin-top: 20px;\" data-section=\"contact-signature\">\n        <tr>\n            <td class=\"contact-info\" style=\"width: 70%;\" data-field=\"contact-info\">\n                ${getContactInfoValue('For inquiries, please contact us')}\n            </td>\n            <td style=\"width: 30%; text-align: center;\" data-field=\"signature\">\n                <table style=\"width: 100%;\">\n                    <tr>\n                        <td style=\"border-top: 1px solid #000; padding-top: 10px;\">\n                            Authorized Signature\n                        </td>\n                    </tr>\n                </table>\n            </td>\n        </tr>\n    </table>\n</body>\n</pdf>`;\n  console.log('✅ DYNAMIC ID TEMPLATE: XML generated successfully with dynamic field support');\n  console.log('📄 XML preview (first 200 chars):', xml.substring(0, 200));\n  return xml;\n}\n\n// Export the template structure for reference with dynamic ID support\nexport const purchaseOrderTemplate = {\n  companyInfo: {\n    staticFields: ['company-name', 'company-address', 'company-city-state', 'company-phone', 'company-fax', 'company-website'],\n    dynamicPrefixes: ['company-field-', 'company-'],\n    dataAttribute: 'data-section=\"company-info\"'\n  },\n  purchaseOrder: {\n    staticFields: ['po-title', 'po-date', 'po-number'],\n    dynamicPrefixes: ['po-field-', 'po-'],\n    dataAttribute: 'data-section=\"purchase-order-info\"'\n  },\n  vendor: {\n    staticFields: ['vendor-company', 'vendor-contact', 'vendor-address', 'vendor-city-state', 'vendor-phone', 'vendor-fax'],\n    dynamicPrefixes: ['vendor-field-', 'vendor-'],\n    dataAttribute: 'data-subsection=\"vendor\"'\n  },\n  shipTo: {\n    staticFields: ['ship-to-name', 'ship-to-company', 'ship-to-address', 'ship-to-city-state', 'ship-to-phone', 'ship-to-fax'],\n    dynamicPrefixes: ['ship-to-field-', 'ship-to-'],\n    dataAttribute: 'data-subsection=\"ship-to\"'\n  },\n  shipping: {\n    staticFields: ['requisitioner', 'shipVia', 'fob', 'shippingTerms'],\n    dynamicPrefixes: ['shipping-field-', 'shipping-'],\n    dataAttribute: 'data-section=\"shipping-details\"'\n  },\n  lineItems: {\n    staticFields: ['itemNumber', 'description', 'quantity', 'unitPrice', 'total'],\n    dynamicPrefixes: ['line-item-', 'item-'],\n    dataAttribute: 'data-section=\"line-items\"',\n    maxRows: 5\n  },\n  totals: {\n    staticFields: ['subtotal', 'tax', 'shipping', 'other', 'total'],\n    dynamicPrefixes: ['total-', 'totals-'],\n    dataAttribute: 'data-subsection=\"totals\"'\n  },\n  comments: {\n    staticFields: ['comments'],\n    dynamicPrefixes: ['comments-field-', 'comment-'],\n    dataAttribute: 'data-subsection=\"comments\"'\n  },\n  contact: {\n    staticFields: ['contactInfo'],\n    dynamicPrefixes: ['contact-info-field-', 'contact-'],\n    dataAttribute: 'data-section=\"contact-signature\"'\n  }\n};\n\n// Export a simple function to get template structure\nexport function getTemplateStructure() {\n  return purchaseOrderTemplate;\n}\n\n// Dynamic ID Generation Utilities\nexport const dynamicIdUtils = {\n  generateId: (prefix = 'field', section = 'general') => {\n    const timestamp = Date.now();\n    const random = Math.random().toString(36).substr(2, 9);\n    return `${section}-${prefix}-${timestamp}-${random}`;\n  },\n  getPossibleIds: (staticId, section = 'unknown') => {\n    const baseName = staticId.replace(/^(company-|po-|vendor-|ship-to-)/, '');\n    return [staticId, `${section}-field-${staticId}`, `${section}-${baseName}`, `${staticId}-${Date.now()}`, `field-${baseName}`, baseName];\n  },\n  isValidDynamicId: id => {\n    const dynamicPattern = /^[a-z-]+-(field-)?[a-z-]+(-\\d+)?(-[a-z0-9]+)?$/;\n    return dynamicPattern.test(id);\n  },\n  getFieldType: id => {\n    return id.replace(/^(company-|po-|vendor-|ship-to-|shipping-|total-|line-item-|comments-|contact-)/, '').replace(/-(field-)?(\\d+)?(-[a-z0-9]+)?$/, '').replace(/^(field-)?/, '');\n  },\n  getSection: id => {\n    if (id.startsWith('company-')) return 'company';\n    if (id.startsWith('po-')) return 'purchase-order';\n    if (id.startsWith('vendor-')) return 'vendor';\n    if (id.startsWith('ship-to-')) return 'ship-to';\n    if (id.startsWith('shipping-')) return 'shipping';\n    if (id.startsWith('line-item-')) return 'line-items';\n    if (id.startsWith('total-')) return 'totals';\n    if (id.startsWith('comments-')) return 'comments';\n    if (id.startsWith('contact-')) return 'contact';\n    return 'unknown';\n  }\n};\n\n// Field Mapping Utilities\nexport const fieldMappingUtils = {\n  staticFieldNames: {\n    'company-name': 'Company Name',\n    'company-address': 'Street Address',\n    'company-city-state': 'City, State, ZIP',\n    'company-phone': 'Phone Number',\n    'company-fax': 'Fax Number',\n    'company-website': 'Website',\n    'po-title': 'Purchase Order Title',\n    'po-date': 'Date',\n    'po-number': 'PO Number',\n    'vendor-company': 'Vendor Company',\n    'vendor-contact': 'Vendor Contact',\n    'vendor-address': 'Vendor Address',\n    'vendor-city-state': 'Vendor City/State',\n    'vendor-phone': 'Vendor Phone',\n    'vendor-fax': 'Vendor Fax',\n    'ship-to-name': 'Ship To Name',\n    'ship-to-company': 'Ship To Company',\n    'ship-to-address': 'Ship To Address',\n    'ship-to-city-state': 'Ship To City/State',\n    'ship-to-phone': 'Ship To Phone',\n    'ship-to-fax': 'Ship To Fax',\n    'requisitioner': 'Requisitioner',\n    'shipVia': 'Ship Via',\n    'fob': 'F.O.B.',\n    'shippingTerms': 'Shipping Terms',\n    'itemNumber': 'Item Number',\n    'description': 'Description',\n    'quantity': 'Quantity',\n    'unitPrice': 'Unit Price',\n    'total': 'Total',\n    'subtotal': 'Subtotal',\n    'tax': 'Tax',\n    'shipping': 'Shipping',\n    'other': 'Other',\n    'comments': 'Comments',\n    'contactInfo': 'Contact Information'\n  },\n  getFieldName: id => {\n    const staticName = fieldMappingUtils.staticFieldNames[id];\n    if (staticName) return staticName;\n    const fieldType = dynamicIdUtils.getFieldType(id);\n    const staticFieldName = fieldMappingUtils.staticFieldNames[fieldType];\n    if (staticFieldName) return staticFieldName;\n    return id.replace(/[-_]/g, ' ').replace(/\\b\\w/g, l => l.toUpperCase());\n  },\n  getFieldsForSection: section => {\n    const template = purchaseOrderTemplate[section];\n    return template ? template.staticFields : [];\n  }\n};","map":{"version":3,"names":["processFormData","generatePurchaseOrderXML","formData","options","console","log","Date","toISOString","processedData","calculateTotals","validate","formatForXML","throwOnValidationError","error","data","fieldOrderData","companyFields","Array","isArray","purchaseOrderFields","vendorFields","shipToFields","getFieldValue","fieldName","defaultValue","getDynamicFieldValue","fieldArray","possibleIds","warn","fieldId","field","find","f","id","value","getCompanyFieldValue","staticId","now","filter","includes","replace","map","getPOFieldValue","getVendorFieldValue","getShipToFieldValue","gehaltenDynamicFieldValue","getTotalsFieldValue","totalsFields","buildCompanyXML","length","label","fieldRows","index","fieldValue","placeholder","isHeader","row","displayText","join","defaultFields","defaultRows","result","buildPurchaseOrderXML","buildHeaderSectionXML","_data$sectionOrder","_data$sectionOrder2","sectionOrder","sections1And2","leftSection","rightSection","leftColumn","rightColumn","buildVendorXML","buildShipToXML","buildVendorShipToSectionXML","_data$sectionOrder3","sections3And4","buildShippingDetailsXML","getShippingFieldValue","buildVendorShipToAndShippingDetailsXML","_data$sectionOrder4","sections3And4And5And6","topSection","bottomSection","topContent","bottomContent","buildLineItemsXML","_data$sectionOrder5","columnOrder","lineItemColumns","columnConfig","itemNumber","colSpan","description","qty","rate","amount","headerRow","columnId","config","lineItems","dataRows","fill","_","rowIndex","rowData","rowCells","buildCommentsXML","comments","buildTotalsXML","subtotal","tax","shipping","other","total","buildCommentsTotalsXML","_data$sectionOrder6","sections8And9","fieldType","possibleSelectors","selector","element","document","querySelector","textContent","trim","getLineItemValue","getColumnIndex","columnMap","quantity","unitPrice","getTotalFieldValue","getCommentsValue","getContactInfoValue","contactInfo","generateLineItemsXML","maxRows","xml","substring","purchaseOrderTemplate","companyInfo","staticFields","dynamicPrefixes","dataAttribute","purchaseOrder","vendor","shipTo","totals","contact","getTemplateStructure","dynamicIdUtils","generateId","prefix","section","timestamp","random","Math","toString","substr","getPossibleIds","baseName","isValidDynamicId","dynamicPattern","test","getFieldType","getSection","startsWith","fieldMappingUtils","staticFieldNames","getFieldName","staticName","staticFieldName","l","toUpperCase","getFieldsForSection","template"],"sources":["/Users/waleed/Documents/GitHub/Cadbury3/src/PurchaseOrderForm.jsx"],"sourcesContent":["// Purchase Order XML Template for NetSuite Integration\n// This template generates XML compatible with Big Faceless Report Generator (BFR)\n\nimport { processFormData } from './FormDataMapper';\n\n// Function to generate XML from React form data\nexport function generatePurchaseOrderXML(formData, options = {}) {\n  // DEBUG: Log that we're using the DYNAMIC ID template\n  console.log('🚀 DYNAMIC ID TEMPLATE VERSION LOADED - generatePurchaseOrderXML called');\n  console.log('📅 Template updated at:', new Date().toISOString());\n  console.log('📊 Raw form data received:', formData);\n  \n  // Process and validate form data using the FormDataMapper\n  let processedData;\n  try {\n    processedData = processFormData(formData, {\n      calculateTotals: options.calculateTotals !== false,\n      validate: options.validate !== false,\n      formatForXML: true,\n      throwOnValidationError: options.throwOnValidationError || false\n    });\n    console.log('📊 Processed form data:', processedData);\n  } catch (error) {\n    console.error('❌ Form data processing failed:', error);\n    if (options.throwOnValidationError) {\n      throw error;\n    }\n    // Fallback to using raw data\n    processedData = formData || {};\n  }\n  \n  // Use processed data for XML generation, fallback to original data\n  // BUT preserve the original field order from formData for dynamic ordering\n  const data = processedData || formData || {};\n  \n  // IMPORTANT: For field ordering, use the original formData to preserve drag-and-drop order\n  const fieldOrderData = {\n    ...data,\n    companyFields: Array.isArray(formData.companyFields) ? formData.companyFields : data.companyFields || [],\n    purchaseOrderFields: Array.isArray(formData.purchaseOrderFields) ? formData.purchaseOrderFields : data.purchaseOrderFields || [],\n    vendorFields: Array.isArray(formData.vendorFields) ? formData.vendorFields : data.vendorFields || [],\n    shipToFields: Array.isArray(formData.shipToFields) ? formData.shipToFields : data.shipToFields || []\n  };\n  \n  // Helper function to safely get field values with fallbacks (for simple fields)\n  const getFieldValue = (fieldName, defaultValue = '') => {\n    return data[fieldName] || defaultValue;\n  };\n\n  // Enhanced helper function to get field values by dynamic ID or static fallback\n  const getDynamicFieldValue = (fieldArray, possibleIds, defaultValue = '') => {\n    if (!Array.isArray(fieldArray)) {\n      console.warn(`⚠️ Field array is not valid for possibleIds:`, possibleIds);\n      return defaultValue;\n    }\n    \n    // Try each possible ID in order of preference\n    for (const fieldId of possibleIds) {\n      const field = fieldArray.find(f => f.id === fieldId);\n      if (field && field.value) {\n        return field.value;\n      }\n    }\n    return defaultValue;\n  };\n\n  // Helper function to get company field values with dynamic ID support\n  const getCompanyFieldValue = (staticId, defaultValue = '') => {\n    if (Array.isArray(data.companyFields)) {\n      // First try the static ID, then try dynamic IDs that might have been generated\n      const possibleIds = [\n        staticId,\n        `company-field-${staticId}`,\n        `${staticId}-${Date.now()}`,\n        ...data.companyFields.filter(f => f.id.includes(staticId.replace('company-', ''))).map(f => f.id)\n      ];\n      return getDynamicFieldValue(data.companyFields, possibleIds, defaultValue);\n    }\n    console.warn(`⚠️ companyFields is not an array for staticId: ${staticId}`);\n    return defaultValue;\n  };\n\n  // Helper function to get purchase order field values with dynamic ID support\n  const getPOFieldValue = (staticId, defaultValue = '') => {\n    if (Array.isArray(data.purchaseOrderFields)) {\n      const possibleIds = [\n        staticId,\n        `po-field-${staticId}`,\n        `${staticId}-${Date.now()}`,\n        ...data.purchaseOrderFields.filter(f => f.id.includes(staticId.replace('po-', ''))).map(f => f.id)\n      ];\n      return getDynamicFieldValue(data.purchaseOrderFields, possibleIds, defaultValue);\n    }\n    return defaultValue;\n  };\n\n  // Helper function to get vendor field values with dynamic ID support\n  const getVendorFieldValue = (staticId, defaultValue = '') => {\n    if (Array.isArray(data.vendorFields)) {\n      const possibleIds = [\n        staticId,\n        `vendor-field-${staticId}`,\n        `${staticId}-${Date.now()}`,\n        ...data.vendorFields.filter(f => f.id.includes(staticId.replace('vendor-', ''))).map(f => f.id)\n      ];\n      return getDynamicFieldValue(data.vendorFields, possibleIds, defaultValue);\n    }\n    return defaultValue;\n  };\n\n  // Helper function to get ship-to field values with dynamic ID support\n  const getShipToFieldValue = (staticId, defaultValue = '') => {\n    if (Array.isArray(data.shipToFields)) {\n      const possibleIds = [\n        staticId,\n        `ship-to-field-${staticId}`,\n        `${staticId}-${Date.now()}`,\n        ...data.shipToFields.filter(f => f.id.includes(staticId.replace('ship-to-', ''))).map(f => f.id)\n      ];\n      return gehaltenDynamicFieldValue(data.shipToFields, possibleIds, defaultValue);\n    }\n    return defaultValue;\n  };\n\n  // Helper function to get totals field values with dynamic ID support\n  const getTotalsFieldValue = (staticId, defaultValue = '') => {\n    if (Array.isArray(data.totalsFields)) {\n      const possibleIds = [\n        staticId,\n        `totals-field-${staticId}`,\n        `${staticId}-${Date.now()}`,\n        ...data.totalsFields.filter(f => f.id.includes(staticId)).map(f => f.id)\n      ];\n      return getDynamicFieldValue(data.totalsFields, possibleIds, defaultValue);\n    }\n    return defaultValue;\n  };\n\n  // ============================================================================\n  // MODULAR XML BUILDER FUNCTIONS\n  // ============================================================================\n  \n  // Build Company Information XML with dynamic field ordering\n  const buildCompanyXML = () => {\n    // Ensure companyFields is an array to prevent errors\n    const companyFields = Array.isArray(fieldOrderData.companyFields) ? fieldOrderData.companyFields : [];\n    \n    console.log('🔀 Building company XML with dynamic field ordering');\n    console.log('🔀 Company fields received from data:', companyFields.length);\n    console.log('🔀 Company fields IDs in current order:', companyFields.map(f => f.id));\n    console.log('🔀 Company fields labels in current order:', companyFields.map(f => f.label));\n    \n    // Build rows dynamically based on current field order\n    const fieldRows = companyFields.map((field, index) => {\n      // Use getCompanyFieldValue to ensure we get the correct value for the field ID\n      const fieldValue = getCompanyFieldValue(field.id, field.value || field.placeholder || '');\n      const isHeader = field.id === 'company-name' || field.id.includes('company-name');\n      \n      console.log(`🔀 Processing field ${index}:`, { id: field.id, label: field.label, value: fieldValue, isHeader });\n      \n      if (isHeader) {\n        const row = `<tr><td class=\"header-company\" style=\"text-align: left;\" data-field=\"${field.id}\">${fieldValue}</td></tr>`;\n        console.log(`🔀 Generated header row for ${field.id}:`, row);\n        return row;\n      } else {\n        // Handle special formatting for phone, fax, website\n        let displayText = fieldValue;\n        if (field.id.includes('phone')) displayText = `Phone: ${fieldValue}`;\n        if (field.id.includes('fax')) displayText = `Fax: ${fieldValue}`;\n        if (field.id.includes('website')) displayText = `Website: ${fieldValue}`;\n        \n        const row = `<tr><td style=\"text-align: left;\" data-field=\"${field.id}\">${displayText}</td></tr>`;\n        console.log(`🔀 Generated regular row for ${field.id}:`, row);\n        return row;\n      }\n    }).join('');\n    \n    // Fallback if no fields are provided\n    if (!fieldRows) {\n      console.warn('⚠️ No company fields provided, generating default rows');\n      const defaultFields = [\n        { id: 'company-name', value: '[Company Name]' },\n        { id: 'company-address', value: '[Street Address]' },\n        { id: 'company-city-state', value: '[City, ST ZIP]' },\n        { id: 'company-phone', value: 'Phone: (000) 000-0000' },\n        { id: 'company-fax', value: 'Fax: (000) 000-0000' },\n        { id: 'company-website', value: 'Website: [Website]' }\n      ];\n      const defaultRows = defaultFields.map((field, index) => {\n        const isHeader = field.id === 'company-name';\n        const row = `<tr><td ${isHeader ? 'class=\"header-company\"' : ''} style=\"text-align: left;\" data-field=\"${field.id}\">${field.value}</td></tr>`;\n        console.log(`🔀 Generated default row for ${field.id}:`, row);\n        return row;\n      }).join('');\n      \n      console.log('🔀 Default company fieldRows:', defaultRows);\n      return `\n        <td style=\"width: 65%; padding-right: 20px;\" data-section=\"company-info\">\n          <table>\n            ${defaultRows}\n          </table>\n        </td>\n      `;\n    }\n    \n    console.log('🔀 Final generated fieldRows:', fieldRows);\n    \n    const result = `\n      <td style=\"width: 65%; padding-right: 20px;\" data-section=\"company-info\">\n        <table>\n          ${fieldRows}\n        </table>\n      </td>\n    `;\n    \n    console.log('🔀 Final company XML result:', result);\n    return result;\n  };\n\n  // Build Purchase Order Information XML\n  const buildPurchaseOrderXML = () => {\n    return `\n      <td style=\"width: 35%; padding-left: 20px;\" align=\"right\" data-section=\"purchase-order-info\">\n        <table>\n          <tr>\n            <td class=\"header-title\" style=\"text-align: right;\" data-field=\"po-title\">${getPOFieldValue('po-title', 'PURCHASE ORDER')}</td>\n          </tr>\n          <tr>\n            <td style=\"text-align: right;\">\n              <table style=\"width: 100%;\">\n                <tr>\n                  <td class=\"header-info\" style=\"width: 30%; text-align: left;\"><b>DATE</b></td>\n                  <td class=\"header-info\" style=\"width: 70%; text-align: left;\" data-field=\"po-date\">${getPOFieldValue('po-date', 'MM/DD/YYYY')}</td>\n                </tr>\n                <tr>\n                  <td class=\"header-info\" style=\"width: 30%; text-align: left;\"><b>PO #</b></td>\n                  <td class=\"header-info\" style=\"width: 70%; text-align: left;\" data-field=\"po-number\">${getPOFieldValue('po-number', '[PO Number]')}</td>\n                </tr>\n              </table>\n            </td>\n          </tr>\n        </table>\n      </td>\n    `;\n  };\n\n  // Build Header Section XML (Company + Purchase Order) with dynamic ordering\n  const buildHeaderSectionXML = () => {\n    // Get section order from data, default to ['section1', 'section2'] if not provided\n    const sectionOrder = Array.isArray(data.sectionOrder?.sections1And2) ? data.sectionOrder.sections1And2 : ['section1', 'section2'];\n    const leftSection = sectionOrder[0];\n    const rightSection = sectionOrder[1];\n    \n    console.log('🔀 Building header section with order:', { leftSection, rightSection });\n    console.log('🔀 Full sectionOrder data:', data.sectionOrder);\n    console.log('🔀 sections1And2 array:', data.sectionOrder?.sections1And2);\n    \n    let leftColumn, rightColumn;\n    \n    if (leftSection === 'section1') {\n      leftColumn = buildCompanyXML();\n      rightColumn = buildPurchaseOrderXML();\n      console.log('🔀 Using default order: Company left, Purchase Order right');\n    } else {\n      leftColumn = buildPurchaseOrderXML();\n      rightColumn = buildCompanyXML();\n      console.log('🔀 Using swapped order: Purchase Order left, Company right');\n    }\n    \n    return `\n      <table>\n        <tr>\n          ${leftColumn}\n          ${rightColumn}\n        </tr>\n      </table>\n    `;\n  };\n\n  // Build Vendor Information XML\n  const buildVendorXML = () => {\n    return `\n      <td style=\"width: 50%;\" data-subsection=\"vendor\">\n        <table>\n          <tr>\n            <td class=\"section-header\">VENDOR</td>\n          </tr>\n          <tr>\n            <td class=\"section-content\">\n              <span data-field=\"vendor-company\">${getVendorFieldValue('vendor-company', '[Company Name]')}</span><br/>\n              <span data-field=\"vendor-contact\">${getVendorFieldValue('vendor-contact', '[Contact Person]')}</span><br/>\n              <span data-field=\"vendor-address\">${getVendorFieldValue('vendor-address', '[Street Address]')}</span><br/>\n              <span data-field=\"vendor-city-state\">${getVendorFieldValue('vendor-city-state', '[City, ST ZIP]')}</span><br/>\n              Phone: <span data-field=\"vendor-phone\">${getVendorFieldValue('vendor-phone', '(000) 000-0000')}</span><br/>\n              Fax: <span data-field=\"vendor-fax\">${getVendorFieldValue('vendor-fax', '(000) 000-0000')}</span>\n            </td>\n          </tr>\n        </table>\n      </td>\n    `;\n  };\n\n  // Build Ship To Information XML\n  const buildShipToXML = () => {\n    return `\n      <td style=\"width: 50%;\" data-subsection=\"ship-to\">\n        <table>\n          <tr>\n            <td class=\"section-header\">SHIP TO</td>\n          </tr>\n          <tr>\n            <td class=\"section-content\">\n              <span data-field=\"ship-to-name\">${getShipToFieldValue('ship-to-name', '[Contact Name]')}</span><br/>\n              <span data-field=\"ship-to-company\">${getShipToFieldValue('ship-to-company', '[Company Name]')}</span><br/>\n              <span data-field=\"ship-to-address\">${getShipToFieldValue('ship-to-address', '[Street Address]')}</span><br/>\n              <span data-field=\"ship-to-city-state\">${getShipToFieldValue('ship-to-city-state', '[City, ST ZIP]')}</span><br/>\n              Phone: <span data-field=\"ship-to-phone\">${getShipToFieldValue('ship-to-phone', '(000) 000-0000')}</span><br/>\n              Fax: <span data-field=\"ship-to-fax\">${getShipToFieldValue('ship-to-fax', '(000) 000-0000')}</span>\n            </td>\n          </tr>\n        </table>\n      </td>\n    `;\n  };\n\n  // Build Vendor-ShipTo Section XML with dynamic ordering\n  const buildVendorShipToSectionXML = () => {\n    const sectionOrder = Array.isArray(data.sectionOrder?.sections3And4) ? data.sectionOrder.sections3And4 : ['section3', 'section4'];\n    const leftSection = sectionOrder[0];\n    const rightSection = sectionOrder[1];\n    \n    console.log('🔀 Building vendor-shipTo section with order:', { leftSection, rightSection });\n    \n    let leftColumn, rightColumn;\n    \n    if (leftSection === 'section3') {\n      leftColumn = buildVendorXML();\n      rightColumn = buildShipToXML();\n      console.log('🔀 Using default order: Vendor left, Ship To right');\n    } else {\n      leftColumn = buildShipToXML();\n      rightColumn = buildVendorXML();\n      console.log('🔀 Using swapped order: Ship To left, Vendor right');\n    }\n    \n    return `\n      <table style=\"margin-top: 20px;\" data-section=\"vendor-ship-to\">\n        <tr>\n          ${leftColumn}\n          ${rightColumn}\n        </tr>\n      </table>\n    `;\n  };\n\n  // Build Shipping Details XML\n  const buildShippingDetailsXML = () => {\n    return `\n      <table style=\"margin-top: 15px;\" data-section=\"shipping-details\">\n        <tr>\n          <td class=\"section-header\" style=\"width: 25%;\">REQUISITIONER</td>\n          <td class=\"section-header\" style=\"width: 25%;\">SHIP VIA</td>\n          <td class=\"section-header\" style=\"width: 25%;\">F.O.B.</td>\n          <td class=\"section-header\" style=\"width: 25%;\">SHIPPING TERMS</td>\n        </tr>\n        <tr>\n          <td class=\"section-content\" data-field=\"requisitioner\">${getShippingFieldValue('requisitioner', '[Requisitioner]')}</td>\n          <td class=\"section-content\" data-field=\"shipVia\">${getShippingFieldValue('shipVia', '[Ship Via]')}</td>\n          <td class=\"section-content\" data-field=\"fob\">${getShippingFieldValue('fob', '[FOB]')}</td>\n          <td class=\"section-content\" data-field=\"shippingTerms\">${getShippingFieldValue('shippingTerms', '[Shipping Terms]')}</td>\n        </tr>\n      </table>\n    `;\n  };\n\n  // Build Vendor-ShipTo and Shipping Details sections with vertical swapping\n  const buildVendorShipToAndShippingDetailsXML = () => {\n    const sectionOrder = Array.isArray(data.sectionOrder?.sections3And4And5And6) ? data.sectionOrder.sections3And4And5And6 : ['sections3And4', 'sections5And6'];\n    const topSection = sectionOrder[0];\n    const bottomSection = sectionOrder[1];\n    \n    console.log('🔀 Building vendor-shipTo + shipping details with order:', { topSection, bottomSection });\n    \n    let topContent, bottomContent;\n    \n    if (topSection === 'sections3And4') {\n      topContent = buildVendorShipToSectionXML();\n      bottomContent = buildShippingDetailsXML();\n      console.log('🔀 Using default order: Vendor-ShipTo top, Shipping Details bottom');\n    } else {\n      topContent = buildShippingDetailsXML();\n      bottomContent = buildVendorShipToSectionXML();\n      console.log('🔀 Using swapped order: Shipping Details top, Vendor-ShipTo bottom');\n    }\n    \n    return `\n      ${topContent}\n      ${bottomContent}\n    `;\n  };\n\n  // Build Line Items XML with dynamic column ordering\n  const buildLineItemsXML = () => {\n    const columnOrder = Array.isArray(data.sectionOrder?.lineItemColumns) ? data.sectionOrder.lineItemColumns : ['itemNumber', 'description', 'qty', 'rate', 'amount'];\n    \n    console.log('🔀 Building line items with column order:', columnOrder);\n    \n    const columnConfig = {\n      itemNumber: { label: 'Item#', colSpan: 3, field: 'itemNumber' },\n      description: { label: 'Description', colSpan: 12, field: 'description' },\n      qty: { label: 'Qty', colSpan: 2, field: 'qty' },\n      rate: { label: 'Rate', colSpan: 3, field: 'rate' },\n      amount: { label: 'Amount', colSpan: 3, field: 'amount' }\n    };\n    \n    const headerRow = columnOrder.map(columnId => {\n      const config = columnConfig[columnId];\n      return `<td class=\"item-header\" colSpan=\"${config.colSpan}\">${config.label}</td>`;\n    }).join('');\n    \n    const lineItems = Array.isArray(data.lineItems) ? data.lineItems : [];\n    const dataRows = Array(5).fill(0).map((_, rowIndex) => {\n      const rowData = lineItems[rowIndex] || {};\n      const rowCells = columnOrder.map(columnId => {\n        const config = columnConfig[columnId];\n        const fieldValue = rowData[columnId] || '-';\n        return `<td colSpan=\"${config.colSpan}\">${fieldValue}</td>`;\n      }).join('');\n      \n      return `<tr data-row-id=\"line-item-${rowIndex}\" data-row-index=\"${rowIndex}\">${rowCells}</tr>`;\n    }).join('');\n    \n    return `\n      <table style=\"margin-top: 15px;\" data-section=\"line-items\">\n        <tr>\n          ${headerRow}\n        </tr>\n        ${dataRows}\n      </table>\n    `;\n  };\n\n  // Build Comments Section XML\n  const buildCommentsXML = () => {\n    const comments = getFieldValue('comments', '[Enter comments or special instructions...]');\n    return `\n      <td style=\"width: 50%;\" data-section=\"comments\">\n        <table>\n          <tr>\n            <td class=\"comments-header\">Comments or Special Instructions</td>\n          </tr>\n          <tr>\n            <td class=\"comments-content\">${comments}</td>\n          </tr>\n        </table>\n      </td>\n    `;\n  };\n\n  // Build Totals Section XML\n  const buildTotalsXML = () => {\n    const subtotal = getTotalsFieldValue('subtotal', '$0.00');\n    const tax = getTotalsFieldValue('tax', '$0.00');\n    const shipping = getTotalsFieldValue('shipping', '$0.00');\n    const other = getTotalsFieldValue('other', '$0.00');\n    const total = getTotalsFieldValue('total', '$0.00');\n    \n    return `\n      <td style=\"width: 50%;\" data-section=\"totals\">\n        <table>\n          <tr>\n            <td class=\"section-header\">Totals</td>\n          </tr>\n          <tr>\n            <td class=\"section-content\">\n              <div>SUBTOTAL: ${subtotal}</div>\n              <div>TAX: ${tax}</div>\n              <div>SHIPPING: ${shipping}</div>\n              <div>OTHER: ${other}</div>\n              <div class=\"total-final\">TOTAL: ${total}</div>\n            </td>\n          </tr>\n        </table>\n      </td>\n    `;\n  };\n\n  // Build Comments and Totals Section XML with dynamic ordering\n  const buildCommentsTotalsXML = () => {\n    const sectionOrder = Array.isArray(data.sectionOrder?.sections8And9) ? data.sectionOrder.sections8And9 : ['section8', 'section9'];\n    const leftSection = sectionOrder[0];\n    const rightSection = sectionOrder[1];\n    \n    console.log('🔀 Building comments/totals section with order:', { leftSection, rightSection });\n    \n    let leftColumn, rightColumn;\n    \n    if (leftSection === 'section8') {\n      leftColumn = buildCommentsXML();\n      rightColumn = buildTotalsXML();\n    } else {\n      leftColumn = buildTotalsXML();\n      rightColumn = buildCommentsXML();\n    }\n    \n    return `\n      <table style=\"margin-top: 15px;\" data-section=\"comments-totals\">\n        <tr>\n          ${leftColumn}\n          ${rightColumn}\n        </tr>\n      </table>\n    `;\n  };\n\n  // Helper function to get shipping details field values with dynamic ID support\n  const getShippingFieldValue = (fieldType, defaultValue = '') => {\n    const possibleSelectors = [\n      `.shipping-field-${fieldType} .editable-field`,\n      `.shipping-field[data-field=\"${fieldType}\"] .editable-field`,\n      `.shipping-${fieldType} .editable-field`,\n      `#shipping-${fieldType}`,\n      `[data-shipping-field=\"${fieldType}\"]`\n    ];\n    \n    if (data[fieldType]) {\n      return data[fieldType];\n    }\n    \n    for (const selector of possibleSelectors) {\n      const element = document.querySelector(selector);\n      if (element && element.textContent.trim()) {\n        return element.textContent.trim();\n      }\n    }\n    \n    return defaultValue;\n  };\n\n  // Helper function to get line item values with dynamic ID support\n  const getLineItemValue = (rowIndex, fieldType, defaultValue = '') => {\n    const possibleSelectors = [\n      `#line-item-${rowIndex}-${fieldType}`,\n      `.line-item-row[data-row=\"${rowIndex}\"] .${fieldType}-field`,\n      `.itemtable tbody tr:nth-child(${rowIndex + 1}) .${fieldType}-field .editable-field`,\n      `.itemtable tbody tr:nth-child(${rowIndex + 1}) td:nth-child(${getColumnIndex(fieldType)}) .editable-field`\n    ];\n    \n    if (data.lineItems && data.lineItems[rowIndex] && data.lineItems[rowIndex][fieldType]) {\n      return data.lineItems[rowIndex][fieldType];\n    }\n    \n    for (const selector of possibleSelectors) {\n      const element = document.querySelector(selector);\n      if (element && element.textContent.trim()) {\n        return element.textContent.trim();\n      }\n    }\n    \n    return defaultValue;\n  };\n\n  // Helper function to get column index for line items\n  const getColumnIndex = (fieldType) => {\n    const columnMap = {\n      itemNumber: 2,\n      description: 3,\n      quantity: 4,\n      unitPrice: 5,\n      total: 6\n    };\n    return columnMap[fieldType] || 1;\n  };\n\n  // Helper function to get totals field values with dynamic ID support\n  const getTotalFieldValue = (fieldType, defaultValue = '') => {\n    const possibleSelectors = [\n      `#total-${fieldType}`,\n      `.total-${fieldType} .editable-field`,\n      `.total-row[data-field=\"${fieldType}\"] .editable-field`,\n      `.totals-section .${fieldType}-field .editable-field`\n    ];\n    \n    if (data[fieldType]) {\n      return data[fieldType];\n    }\n    \n    for (const selector of possibleSelectors) {\n      const element = document.querySelector(selector);\n      if (element && element.textContent.trim()) {\n        return element.textContent.trim();\n      }\n    }\n    \n    return defaultValue;\n  };\n\n  // Helper function to get comments field value with dynamic ID support\n  const getCommentsValue = (defaultValue = '') => {\n    const possibleSelectors = [\n      '#comments-field',\n      '.comments-content .editable-field',\n      '.comments-section .editable-field',\n      '[data-field=\"comments\"]'\n    ];\n    \n    if (data.comments) {\n      return data.comments;\n    }\n    \n    for (const selector of possibleSelectors) {\n      const element = document.querySelector(selector);\n      if (element && element.textContent.trim()) {\n        return element.textContent.trim();\n      }\n    }\n    \n    return defaultValue;\n  };\n\n  // Helper function to get contact info field value with dynamic ID support\n  const getContactInfoValue = (defaultValue = '') => {\n    const possibleSelectors = [\n      '#contact-info-field',\n      '.contact-section .editable-field',\n      '.contact-info .editable-field',\n      '[data-field=\"contactInfo\"]'\n    ];\n    \n    if (data.contactInfo) {\n      return data.contactInfo;\n    }\n    \n    for (const selector of possibleSelectors) {\n      const element = document.querySelector(selector);\n      if (element && element.textContent.trim()) {\n        return element.textContent.trim();\n      }\n    }\n    \n    return defaultValue;\n  };\n\n  // Generate line items XML with dynamic ID support\n  const generateLineItemsXML = () => {\n    const maxRows = 5;\n    \n    return Array(maxRows).fill(0).map((_, index) => {\n      const itemNumber = getLineItemValue(index, 'itemNumber', '-');\n      const description = getLineItemValue(index, 'description', '-');\n      const quantity = getLineItemValue(index, 'quantity', '-');\n      const unitPrice = getLineItemValue(index, 'unitPrice', '-');\n      const total = getLineItemValue(index, 'total', '-');\n      \n      return `\n        <tr data-row-id=\"line-item-${index}\" data-row-index=\"${index}\">\n            <td class=\"item-cell\" align=\"left\" colspan=\"3\" data-field=\"itemNumber\" data-row=\"${index}\">${itemNumber}</td>\n            <td class=\"item-cell\" align=\"left\" colspan=\"12\" data-field=\"description\" data-row=\"${index}\">${description}</td>\n            <td class=\"item-cell\" align=\"center\" colspan=\"2\" data-field=\"quantity\" data-row=\"${index}\">${quantity}</td>\n            <td class=\"item-cell\" align=\"right\" colspan=\"3\" data-field=\"unitPrice\" data-row=\"${index}\">${unitPrice}</td>\n            <td class=\"item-cell\" align=\"right\" colspan=\"3\" data-field=\"total\" data-row=\"${index}\">${total}</td>\n        </tr>`;\n    }).join('');\n  };\n\n  // Generate the complete XML\n  const xml = `<?xml version=\"1.0\"?>\n<!DOCTYPE pdf PUBLIC \"-//big.faceless.org//report\" \"report-1.1.dtd\">\n<pdf>\n<head>\n    <meta name=\"title\" value=\"Purchase Order\"/>\n    <meta name=\"author\" value=\"Purchase Order Generator\"/>\n    <meta name=\"subject\" value=\"Purchase Order\"/>\n    <meta name=\"creator\" value=\"Purchase Order Generator\"/>\n    <meta name=\"producer\" value=\"Purchase Order Generator\"/>\n    <meta name=\"creationDate\" value=\"${new Date().toISOString()}\"/>\n    <meta name=\"modDate\" value=\"${new Date().toISOString()}\"/>\n    <link name=\"NotoSans\" type=\"font\" subtype=\"truetype\" src=\"\\${nsfont.NotoSans_Regular}\" src-bold=\"\\${nsfont.NotoSans_Bold}\" src-italic=\"\\${nsfont.NotoSans_Italic}\" src-bolditalic=\"\\${nsfont.NotoSans_BoldItalic}\" bytes=\"2\" />\n    <style>\n        * { font-family: NotoSans, sans-serif; font-size: 9pt; }\n        table { width: 100%; border-collapse: collapse; }\n        .header-company { font-size: 14pt; font-weight: bold; }\n        .header-title { font-size: 20pt; font-weight: bold; background-color: #333333; color: #ffffff; padding: 6px; border: 1px solid #000; }\n        .header-info { font-size: 10pt; }\n        .section-header { background-color: #333333; color: #ffffff; font-weight: bold; padding: 6px; border: 1px solid #000; }\n        .section-content { padding: 6px; border: 1px solid #000; vertical-align: top; }\n        .item-header { background-color: #333333; color: #ffffff; font-weight: bold; padding: 8px; border: 1px solid #000; }\n        .item-cell { padding: 6px; border: 1px solid #000; }\n        .total-label { font-weight: bold; padding: 4px; }\n        .total-amount { font-weight: bold; padding: 4px; background-color: #ffff99; }\n        .comments-header { background-color: #333333; color: #ffffff; font-weight: bold; padding: 6px; border: 1px solid #000; }\n        .comments-content { padding: 6px; border: 1px solid #000; min-height: 40px; }\n        .contact-info { font-size: 8pt; }\n    </style>\n</head>\n<body padding=\"0.5in\" size=\"Letter\">\n    \n    ${buildHeaderSectionXML()}\n    ${buildVendorShipToAndShippingDetailsXML()}\n    ${buildLineItemsXML()}\n    ${buildCommentsTotalsXML()}\n    \n    <table style=\"margin-top: 20px;\" data-section=\"contact-signature\">\n        <tr>\n            <td class=\"contact-info\" style=\"width: 70%;\" data-field=\"contact-info\">\n                ${getContactInfoValue('For inquiries, please contact us')}\n            </td>\n            <td style=\"width: 30%; text-align: center;\" data-field=\"signature\">\n                <table style=\"width: 100%;\">\n                    <tr>\n                        <td style=\"border-top: 1px solid #000; padding-top: 10px;\">\n                            Authorized Signature\n                        </td>\n                    </tr>\n                </table>\n            </td>\n        </tr>\n    </table>\n</body>\n</pdf>`;\n\n  console.log('✅ DYNAMIC ID TEMPLATE: XML generated successfully with dynamic field support');\n  console.log('📄 XML preview (first 200 chars):', xml.substring(0, 200));\n  return xml;\n}\n\n// Export the template structure for reference with dynamic ID support\nexport const purchaseOrderTemplate = {\n  companyInfo: {\n    staticFields: ['company-name', 'company-address', 'company-city-state', 'company-phone', 'company-fax', 'company-website'],\n    dynamicPrefixes: ['company-field-', 'company-'],\n    dataAttribute: 'data-section=\"company-info\"'\n  },\n  purchaseOrder: {\n    staticFields: ['po-title', 'po-date', 'po-number'],\n    dynamicPrefixes: ['po-field-', 'po-'],\n    dataAttribute: 'data-section=\"purchase-order-info\"'\n  },\n  vendor: {\n    staticFields: ['vendor-company', 'vendor-contact', 'vendor-address', 'vendor-city-state', 'vendor-phone', 'vendor-fax'],\n    dynamicPrefixes: ['vendor-field-', 'vendor-'],\n    dataAttribute: 'data-subsection=\"vendor\"'\n  },\n  shipTo: {\n    staticFields: ['ship-to-name', 'ship-to-company', 'ship-to-address', 'ship-to-city-state', 'ship-to-phone', 'ship-to-fax'],\n    dynamicPrefixes: ['ship-to-field-', 'ship-to-'],\n    dataAttribute: 'data-subsection=\"ship-to\"'\n  },\n  shipping: {\n    staticFields: ['requisitioner', 'shipVia', 'fob', 'shippingTerms'],\n    dynamicPrefixes: ['shipping-field-', 'shipping-'],\n    dataAttribute: 'data-section=\"shipping-details\"'\n  },\n  lineItems: {\n    staticFields: ['itemNumber', 'description', 'quantity', 'unitPrice', 'total'],\n    dynamicPrefixes: ['line-item-', 'item-'],\n    dataAttribute: 'data-section=\"line-items\"',\n    maxRows: 5\n  },\n  totals: {\n    staticFields: ['subtotal', 'tax', 'shipping', 'other', 'total'],\n    dynamicPrefixes: ['total-', 'totals-'],\n    dataAttribute: 'data-subsection=\"totals\"'\n  },\n  comments: {\n    staticFields: ['comments'],\n    dynamicPrefixes: ['comments-field-', 'comment-'],\n    dataAttribute: 'data-subsection=\"comments\"'\n  },\n  contact: {\n    staticFields: ['contactInfo'],\n    dynamicPrefixes: ['contact-info-field-', 'contact-'],\n    dataAttribute: 'data-section=\"contact-signature\"'\n  }\n};\n\n// Export a simple function to get template structure\nexport function getTemplateStructure() {\n  return purchaseOrderTemplate;\n}\n\n// Dynamic ID Generation Utilities\nexport const dynamicIdUtils = {\n  generateId: (prefix = 'field', section = 'general') => {\n    const timestamp = Date.now();\n    const random = Math.random().toString(36).substr(2, 9);\n    return `${section}-${prefix}-${timestamp}-${random}`;\n  },\n\n  getPossibleIds: (staticId, section = 'unknown') => {\n    const baseName = staticId.replace(/^(company-|po-|vendor-|ship-to-)/, '');\n    return [\n      staticId,\n      `${section}-field-${staticId}`,\n      `${section}-${baseName}`,\n      `${staticId}-${Date.now()}`,\n      `field-${baseName}`,\n      baseName\n    ];\n  },\n\n  isValidDynamicId: (id) => {\n    const dynamicPattern = /^[a-z-]+-(field-)?[a-z-]+(-\\d+)?(-[a-z0-9]+)?$/;\n    return dynamicPattern.test(id);\n  },\n\n  getFieldType: (id) => {\n    return id\n      .replace(/^(company-|po-|vendor-|ship-to-|shipping-|total-|line-item-|comments-|contact-)/, '')\n      .replace(/-(field-)?(\\d+)?(-[a-z0-9]+)?$/, '')\n      .replace(/^(field-)?/, '');\n  },\n\n  getSection: (id) => {\n    if (id.startsWith('company-')) return 'company';\n    if (id.startsWith('po-')) return 'purchase-order';\n    if (id.startsWith('vendor-')) return 'vendor';\n    if (id.startsWith('ship-to-')) return 'ship-to';\n    if (id.startsWith('shipping-')) return 'shipping';\n    if (id.startsWith('line-item-')) return 'line-items';\n    if (id.startsWith('total-')) return 'totals';\n    if (id.startsWith('comments-')) return 'comments';\n    if (id.startsWith('contact-')) return 'contact';\n    return 'unknown';\n  }\n};\n\n// Field Mapping Utilities\nexport const fieldMappingUtils = {\n  staticFieldNames: {\n    'company-name': 'Company Name',\n    'company-address': 'Street Address',\n    'company-city-state': 'City, State, ZIP',\n    'company-phone': 'Phone Number',\n    'company-fax': 'Fax Number',\n    'company-website': 'Website',\n    'po-title': 'Purchase Order Title',\n    'po-date': 'Date',\n    'po-number': 'PO Number',\n    'vendor-company': 'Vendor Company',\n    'vendor-contact': 'Vendor Contact',\n    'vendor-address': 'Vendor Address',\n    'vendor-city-state': 'Vendor City/State',\n    'vendor-phone': 'Vendor Phone',\n    'vendor-fax': 'Vendor Fax',\n    'ship-to-name': 'Ship To Name',\n    'ship-to-company': 'Ship To Company',\n    'ship-to-address': 'Ship To Address',\n    'ship-to-city-state': 'Ship To City/State',\n    'ship-to-phone': 'Ship To Phone',\n    'ship-to-fax': 'Ship To Fax',\n    'requisitioner': 'Requisitioner',\n    'shipVia': 'Ship Via',\n    'fob': 'F.O.B.',\n    'shippingTerms': 'Shipping Terms',\n    'itemNumber': 'Item Number',\n    'description': 'Description',\n    'quantity': 'Quantity',\n    'unitPrice': 'Unit Price',\n    'total': 'Total',\n    'subtotal': 'Subtotal',\n    'tax': 'Tax',\n    'shipping': 'Shipping',\n    'other': 'Other',\n    'comments': 'Comments',\n    'contactInfo': 'Contact Information'\n  },\n\n  getFieldName: (id) => {\n    const staticName = fieldMappingUtils.staticFieldNames[id];\n    if (staticName) return staticName;\n    \n    const fieldType = dynamicIdUtils.getFieldType(id);\n    const staticFieldName = fieldMappingUtils.staticFieldNames[fieldType];\n    if (staticFieldName) return staticFieldName;\n    \n    return id.replace(/[-_]/g, ' ').replace(/\\b\\w/g, l => l.toUpperCase());\n  },\n\n  getFieldsForSection: (section) => {\n    const template = purchaseOrderTemplate[section];\n    return template ? template.staticFields : [];\n  }\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}